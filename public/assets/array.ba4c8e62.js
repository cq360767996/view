var Qe=Object.defineProperty,et=Object.defineProperties;var tt=Object.getOwnPropertyDescriptors;var ne=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var Ce=(e,t,n)=>t in e?Qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B=(e,t)=>{for(var n in t||(t={}))_e.call(t,n)&&Ce(e,n,t[n]);if(ne)for(var n of ne(t))we.call(t,n)&&Ce(e,n,t[n]);return e},C=(e,t)=>et(e,tt(t));var ce=(e,t)=>{var n={};for(var a in e)_e.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&ne)for(var a of ne(e))t.indexOf(a)<0&&we.call(e,a)&&(n[a]=e[a]);return n};import{r as X,P as ae,t as re,o as W,x as de,y as Ie,q as he,w as nt,d4 as at,d5 as pe,d6 as ut,d7 as Oe,d as ue,k as fe,cX as P,cY as me,d8 as ke,d9 as Re,da as Se,db as xe,dc as Le,dd as Pe,de as Te,df as Me,dg as ge,a5 as Fe,dh as st,di as ot,c_ as V,dj as Ye,F as De,dk as Xe,u as se,dl as lt,N as Ue,dm as it,dn as ct,l as m,dp as U,D as rt,dq as dt,dr as $e,ae as ht,Y as pt,ds as $,Z as oe,dt as ft,du as mt,dv as gt}from"./vendor.1aa60481.js";import{k as Ee,l as T}from"./lodash.52f79bb2.js";import{T as ze,E as Ft,m as O}from"./ant-design-vue.2c5e11f6.js";import"./node-forge.5968f396.js";import{g as Dt}from"./echarts.3ce280c0.js";import"./prettier.bc782120.js";const Et=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const s of u)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(u){const s={};return u.integrity&&(s.integrity=u.integrity),u.referrerpolicy&&(s.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?s.credentials="include":u.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(u){if(u.ep)return;u.ep=!0;const s=n(u);fetch(u.href,s)}};Et();const z=(e,t,n)=>{document.addEventListener(e,t,n)},Z=(e,t,n)=>{document.removeEventListener(e,t,n)},be=e=>{const t=["width","height","top","left","bottom","right","fontSize","borderWidth","borderRadius"],n={};for(const[a,u]of Object.entries(e))if(!!u){if(a==="rotate"){n.transform=`rotate(${u}deg)`;continue}if(a==="scale"){n.transform=`scale(${u/100})`;continue}n[a]=t.includes(a)?u+"px":u}return n},bt=(e,t=!0)=>{const d=e,{width:n,height:a,left:u,top:s}=d,o=ce(d,["width","height","left","top"]),c=t?{width:n,height:a,left:u,top:s}:B({},o);return be(c)},vt="modulepreload",je={},yt="/",He=function(t,n){return!n||n.length===0?t():Promise.all(n.map(a=>{if(a=`${yt}${a}`,a in je)return;je[a]=!0;const u=a.endsWith(".css"),s=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${s}`))return;const o=document.createElement("link");if(o.rel=u?"stylesheet":vt,u||(o.as="script",o.crossOrigin=""),o.href=a,document.head.appendChild(o),u)return new Promise((c,d)=>{o.addEventListener("load",c),o.addEventListener("error",d)})})).then(()=>t())};var Ne;(function(e){e.RADIO="radio",e.CHECKBOX="checkbox",e.INPUT="input",e.INPUT_NUMBER="input-number",e.SELECT="select",e.SWITCH="switch",e.SLIDER="slider",e.COLOR_PICKER="color-picker",e.BTN_GROUP="btn-group",e.TEXTAREA="textarea",e.CUSTOM="custom"})(Ne||(Ne={}));var j;(function(e){e.USER_INFO="user-info",e.AUTHORIZATION="authorization",e.IS_DARK="is-dark"})(j||(j={}));var _;(function(e){e.X="x",e.Y="y"})(_||(_={}));const Qt=()=>{const e=w(),t=X({show:!1,style:{width:0,height:0,top:0,left:0}});return{selectMask:t,handleMousedown:a=>{if(a.buttons===1){t.show=!0;const{pageX:u,pageY:s}=a,o=Nt(u,s);if(!o)return;t.style=C(B(B({},t.style),o),{width:0,height:0});const c=r=>{const{pageX:i,pageY:h}=r,f=M(i-u),g=M(h-s);f<0&&(t.style.left=o.left+f),g<0&&(t.style.top=o.top+g),t.style.width=Math.abs(f),t.style.height=Math.abs(g),e.calcSelectedByRect(t.style)},d=r=>{r.stopPropagation(),Z("mousemove",c),Z("mouseup",d),t.show=!1,r.clientX==u&&r.clientY==s&&e.cancelSelected()};z("mousemove",c),z("mouseup",d)}}}},At=()=>{const e=n=>{const u=w().refs[n];if(u){const s=Dt(u);s==null||s.resize()}};return{handleEchartsResize:e,handleAllEchartsResize:n=>{for(let a=0,u=n.data.length;a<u;a++)e(a)}}},en=(e,t,n)=>{const a=ae(),u=X({width:0,height:0,top:0,left:0}),s=re(!0),o=N(),c=Be(),d=()=>{if(!e.value||!t.value||!a.value)return;const{width:E,height:D}=e.value.getBoundingClientRect(),{width:v,height:y}=t.value.getBoundingClientRect(),{width:l,height:p}=a.value.getBoundingClientRect(),b=v/E,k=y/D;u.width=Math.min(b*l,l),u.height=Math.min(k*p,p),n.value++},r=E=>{if(E.buttons!==1||!a.value)return;const D=E.target;let v=E.clientX,y=E.clientY,{left:l,top:p}=u;const{width:b,height:k}=a.value.getBoundingClientRect(),{width:G,height:K}=D.getBoundingClientRect(),R=b-G,S=k-K,x=A=>{if(A.stopPropagation(),!t.value||!e.value)return;const{clientX:Y,clientY:L}=A,q=Y-v,ie=L-y;let ee=0,te=0;q<0&&u.left<=0?(v=Y,l=0,ee=0):q>=0&&u.left>=R?(v=Y,l=R,ee=R):ee=l+q,ie<0&&u.top<=0?(y=L,p=0,te=0):ie>=0&&u.top>=S?(y=L,p=S,te=S):te=p+ie,u.left=ee,u.top=te},I=A=>{A.stopPropagation(),Z("mousemove",x),Z("mouseup",I)};z("mousemove",x),z("mouseup",I)},i=()=>{if(!e.value||!t.value||!a.value)return;const E=N(),D=a.value.getContext("2d");if(!D)return;const{width:v,height:y}=a.value;D.clearRect(0,0,v,y);const{width:l,height:p}=a.value.getBoundingClientRect(),{width:b,height:k}=e.value.getBoundingClientRect(),{width:G,height:K}=E.config,R=l/M(b),S=p/M(k),x=R*2,I=S*2,A=G*x,Y=K*I,L=60*x,q=60*I;D.strokeStyle="#1890ff",D.lineWidth=2,D.strokeRect(L,q,A,Y)},h=Ee(d,100),f=Ee(i,100),g=()=>{if(!e.value||!t.value||!a.value)return;const{width:E,height:D}=e.value.getBoundingClientRect(),{width:v,height:y}=a.value.getBoundingClientRect(),{scrollLeft:l,scrollTop:p}=t.value;u.left=l/E*v,u.top=p/D*y};return W(()=>{window.addEventListener("resize",h),window.addEventListener("resize",f),de(()=>{d(),i()})}),Ie(()=>{window.removeEventListener("resize",h),window.removeEventListener("resize",f)}),he(()=>{if(!t.value||!a.value||!e.value)return;const{width:E,height:D}=e.value.getBoundingClientRect(),{width:v,height:y}=a.value.getBoundingClientRect(),l=u.left*E/v,p=u.top*D/y;t.value.scroll(l,p)}),nt(c,()=>{setTimeout(()=>{d(),i()},300)}),he(()=>{o.config.scale&&(h(),f())}),{viewportSize:u,resizeViewport:d,thumbnailRef:a,handleThumbnailMousedown:r,syncScroll:g,showThumbnail:s,switchThumbnail:()=>{s.value=!s.value}}},tn=e=>{const t=N(),n=X({width:0,height:0}),a=re(0),u=c=>c+"%",s=()=>{if(!e.value)return;const{width:c,height:d}=e.value.getBoundingClientRect(),{width:r,height:i}=t.config,h=M(r+400,!0),f=M(i+400,!0),g=c-4,F=d-4;n.width=h<=g?g:h,n.height=f<=F?F:f,a.value++},o=Ee(s,100);return W(()=>{he(()=>{t.config.scale&&s()})}),{sliderFormatter:u,handleSliderChange:o,screenShotSize:n,rulerKey:a}},nn=()=>{const e=X([{direction:_.X,marklineDct:_.Y,marklines:[]},{direction:_.Y,marklineDct:_.X,marklines:[]}]);return{rulerData:e,getStyle:(s,o)=>{const c=s===_.Y?" rotate(90deg)":"",d=s===_.Y?"top":"left";return`transform:${c} translateX(${o[d]}px)`},getUnit:s=>s===_.X?"width":"height",addMarkline:(s,o)=>{const{clientX:c,clientY:d}=s,r=s.target,{left:i,top:h}=r.getBoundingClientRect(),[f,g]=o===_.X?[d-h,1]:[c-i,0];e[g].marklines.push(f)},cancelMarkline:(s,o)=>{const c=o===_.X?0:1;e[c].marklines.splice(s,1)}}},an=()=>{const e=N(),t=Be(),n=w(),a={Backspace:()=>n.del(),a:s=>s&&n.selectAll(),s:s=>s&&e.savePage(),c:s=>s&&n.copy(),ArrowLeft:s=>{s?t.switchPanelShow("layer"):n.selected.forEach(o=>{n.data[o].style.left-=e.config.gap})},ArrowUp:s=>{s?t.switchPanelShow("component"):n.selected.forEach(o=>{n.data[o].style.top-=e.config.gap})},ArrowRight:s=>{s?t.switchPanelShow("config"):n.selected.forEach(o=>{n.data[o].style.left+=e.config.gap})},ArrowDown:()=>{n.selected.forEach(s=>{n.data[s].style.top+=e.config.gap})}},u=s=>{var c;if(!((c=document.querySelector(".canvas-wrapper"))==null?void 0:c.contains(document.activeElement)))return;const o=a[s.key];if(o){s.preventDefault(),s.stopPropagation();const d=s.ctrlKey||s.metaKey;o(d)}};W(()=>z("keydown",u)),Ie(()=>Z("keydown",u))},Bt=e=>{const t=[{title:"\u5F3A\u8C03",data:[{name:"bounce",label:"\u5F39\u8DF3"},{name:"flash",label:"\u95EA\u70C1"},{name:"pulse",label:"\u653E\u5927\u7F29\u5C0F"},{name:"rubberBand",label:"\u653E\u5927\u7F29\u5C0F\u5F39\u7C27"},{name:"shakeX",label:"\u5DE6\u53F3\u6643\u52A8"},{name:"shakeY",label:"\u4E0A\u4E0B\u6643\u52A8"},{name:"headShake",label:"\u5DE6\u53F3\u5C0F\u5E45\u6643\u52A8"},{name:"swing",label:"\u5DE6\u53F3\u6247\u5F62\u6447\u6446"},{name:"tada",label:"\u653E\u5927\u6643\u52A8\u7F29\u5C0F"},{name:"wobble",label:"\u5C0F\u5E45\u6247\u5F62\u6447\u6446"},{name:"jello",label:"\u679C\u51BB\u6447\u6643"},{name:"heartBeat",label:"Y\u8F74\u65CB\u8F6C"}]},{title:"\u5EF6\u8FDF",data:[{name:"backInDown",label:"\u5EF6\u8FDF\u4E0A\u65B9\u8FDB\u5165"},{name:"backInLeft",label:"\u5EF6\u8FDF\u5DE6\u4FA7\u8FDB\u5165"},{name:"backInRight",label:"\u5EF6\u8FDF\u53F3\u4FA7\u8FDB\u5165"},{name:"backInUp",label:"\u5EF6\u8FDF\u4E0B\u65B9\u8FDB\u5165"},{name:"backOutDown",label:"\u5EF6\u8FDF\u4E0B\u65B9\u9000\u51FA"},{name:"backOutLeft",label:"\u5EF6\u8FDF\u5DE6\u4FA7\u9000\u51FA"},{name:"backOutRight",label:"\u5EF6\u8FDF\u53F3\u4FA7\u9000\u51FA"},{name:"backOutUp",label:"\u5EF6\u8FDF\u4E0A\u65B9\u9000\u51FA"}]},{title:"\u8DF3\u8DC3",data:[{name:"bounceIn",label:"\u8DF3\u8DC3\u8FDB\u5165"},{name:"bounceInDown",label:"\u4E0A\u65B9\u8DF3\u8DC3\u8FDB\u5165"},{name:"bounceInLeft",label:"\u5DE6\u4FA7\u8DF3\u8DC3\u8FDB\u5165"},{name:"bounceInRight",label:"\u53F3\u4FA7\u8DF3\u8DC3\u8FDB\u5165"},{name:"bounceInUp",label:"\u4E0B\u65B9\u8DF3\u8DC3\u8FDB\u5165"},{name:"bounceOut",label:"\u8DF3\u8DC3\u9000\u51FA"},{name:"bounceOutDown",label:"\u4E0B\u65B9\u8DF3\u8DC3\u9000\u51FA"},{name:"bounceOutLeft",label:"\u5DE6\u4FA7\u8DF3\u8DC3\u9000\u51FA"},{name:"bounceOutRight",label:"\u53F3\u4FA7\u8DF3\u8DC3\u9000\u51FA"},{name:"bounceOutUp",label:"\u4E0A\u65B9\u8DF3\u8DC3\u9000\u51FA"}]},{title:"\u6DE1\u5165/\u6DE1\u51FA",data:[{name:"fadeIn",label:"\u6DE1\u5165"},{name:"fadeInDown",label:"\u4E0A\u65B9\u6DE1\u5165"},{name:"fadeInDownBig",label:"\u4E0A\u65B9\u8FDC\u8DDD\u79BB\u6DE1\u5165"},{name:"fadeInLeft",label:"\u5DE6\u4FA7\u6DE1\u5165"},{name:"fadeInLeftBig",label:"\u5DE6\u4FA7\u8FDC\u8DDD\u79BB\u6DE1\u5165"},{name:"fadeInRight",label:"\u53F3\u4FA7\u6DE1\u5165"},{name:"fadeInRightBig",label:"\u53F3\u4FA7\u8FDC\u8DDD\u79BB\u6DE1\u5165"},{name:"fadeInUp",label:"\u4E0A\u65B9\u6DE1\u5165"},{name:"fadeInUpBig",label:"\u4E0A\u65B9\u8FDC\u8DDD\u79BB\u6DE1\u5165"},{name:"fadeInTopLeft",label:"\u5DE6\u4E0A\u6DE1\u5165"},{name:"fadeInTopRight",label:"\u53F3\u4E0A\u6DE1\u5165"},{name:"fadeInBottomLeft",label:"\u5DE6\u4E0B\u6DE1\u5165"},{name:"fadeInBottomRight",label:"\u53F3\u4E0B\u6DE1\u5165"},{name:"fadeOut",label:"\u6DE1\u51FA"},{name:"fadeOutDown",label:"\u4E0B\u65B9\u6DE1\u51FA"},{name:"fadeOutDownBig",label:"\u4E0B\u65B9\u8FDC\u8DDD\u79BB\u6DE1\u51FA"},{name:"fadeOutLeft",label:"\u5DE6\u4FA7\u6DE1\u51FA"},{name:"fadeOutLeftBig",label:"\u5DE6\u4FA7\u8FDC\u8DDD\u79BB\u6DE1\u51FA"},{name:"fadeOutRight",label:"\u53F3\u4FA7\u6DE1\u51FA"},{name:"fadeOutRightBig",label:"\u53F3\u4FA7\u8FDC\u8DDD\u79BB\u6DE1\u51FA"},{name:"fadeOutUp",label:"\u4E0A\u65B9\u6DE1\u51FA"},{name:"fadeOutUpBig",label:"\u4E0A\u65B9\u8FDC\u8DDD\u79BB\u6DE1\u51FA"},{name:"fadeOutTopLeft",label:"\u5DE6\u4E0A\u6DE1\u51FA"},{name:"fadeOutTopRight",label:"\u53F3\u4E0A\u6DE1\u51FA"},{name:"fadeOutBottomRight",label:"\u5DE6\u4E0B\u6DE1\u51FA"},{name:"fadeOutBottomLeft",label:"\u53F3\u4E0B\u6DE1\u51FA"}]},{title:"\u7FFB\u8F6C",data:[{name:"flip",label:"\u7FFB\u8F6C"},{name:"flipInX",label:"\u6A2A\u5411\u7FFB\u8F6C\u8FDB\u5165"},{name:"flipInY",label:"\u7EB5\u5411\u7FFB\u8F6C\u8FDB\u5165"},{name:"flipOutX",label:"\u6A2A\u5411\u7FFB\u8F6C\u9000\u51FA"},{name:"flipOutY",label:"\u7EB5\u5411\u7FFB\u8F6C\u9000\u51FA"}]},{title:"\u5149\u901F",data:[{name:"lightSpeedInRight",label:"\u53F3\u4FA7\u5149\u901F\u8FDB\u5165"},{name:"lightSpeedInLeft",label:"\u5DE6\u4FA7\u5149\u901F\u8FDB\u5165"},{name:"lightSpeedOutRight",label:"\u53F3\u4FA7\u5149\u901F\u9000\u51FA"},{name:"lightSpeedOutLeft",label:"\u5DE6\u4FA7\u5149\u901F\u9000\u51FA"}]},{title:"\u65CB\u8F6C",data:[{name:"rotateIn",label:"\u65CB\u8F6C\u8FDB\u5165"},{name:"rotateInDownLeft",label:"\u5DE6\u4E0A\u65CB\u8F6C\u8FDB\u5165"},{name:"rotateInDownRight",label:"\u53F3\u4E0A\u65CB\u8F6C\u8FDB\u5165"},{name:"rotateInUpLeft",label:"\u53F3\u4E0B\u65CB\u8F6C\u8FDB\u5165"},{name:"rotateInUpRight",label:"\u5DE6\u4E0B\u65CB\u8F6C\u8FDB\u5165"},{name:"rotateOut",label:"\u65CB\u8F6C\u9000\u51FA"},{name:"rotateOutDownLeft",label:"\u5DE6\u4E0B\u65CB\u8F6C\u9000\u51FA"},{name:"rotateOutDownRight",label:"\u53F3\u4E0B\u65CB\u8F6C\u9000\u51FA"},{name:"rotateOutUpLeft",label:"\u5DE6\u4E0A\u65CB\u8F6C\u9000\u51FA"},{name:"rotateOutUpRight",label:"\u53F3\u4E0A\u65CB\u8F6C\u9000\u51FA"}]},{title:"\u653E\u7F29",data:[{name:"zoomIn",label:"\u653E\u7F29\u8FDB\u5165"},{name:"zoomInDown",label:"\u4E0A\u65B9\u653E\u7F29\u8FDB\u5165"},{name:"zoomInLeft",label:"\u5DE6\u4FA7\u653E\u7F29\u8FDB\u5165"},{name:"zoomInRight",label:"\u53F3\u4FA7\u653E\u7F29\u8FDB\u5165"},{name:"zoomInUp",label:"\u4E0B\u65B9\u653E\u7F29\u8FDB\u5165"},{name:"zoomOut",label:"\u653E\u7F29\u9000\u51FA"},{name:"zoomOutDown",label:"\u4E0B\u65B9\u653E\u7F29\u9000\u51FA"},{name:"zoomOutLeft",label:"\u5DE6\u4FA7\u653E\u7F29\u9000\u51FA"},{name:"zoomOutRight",label:"\u53F3\u4FA7\u653E\u7F29\u9000\u51FA"},{name:"zoomOutUp",label:"\u4E0A\u65B9\u653E\u7F29\u9000\u51FA"}]},{title:"\u6ED1\u52A8",data:[{name:"slideInDown",label:"\u4E0A\u65B9\u6ED1\u5165"},{name:"slideInLeft",label:"\u5DE6\u4FA7\u6ED1\u5165"},{name:"slideInRight",label:"\u53F3\u4FA7\u6ED1\u5165"},{name:"slideInUp",label:"\u4E0B\u65B9\u6ED1\u5165"},{name:"slideOutDown",label:"\u4E0B\u65B9\u6ED1\u51FA"},{name:"slideOutLeft",label:"\u5DE6\u4FA7\u6ED1\u51FA"},{name:"slideOutRight",label:"\u53F3\u4FA7\u6ED1\u51FA"},{name:"slideOutUp",label:"\u4E0A\u65B9\u6ED1\u51FA"}]},{title:"\u7279\u6B8A",data:[{name:"hinge",label:"\u60AC\u6302\u6389\u843D"},{name:"jackInTheBox",label:"\u4E0B\u65B9\u98DE\u5165"},{name:"rollIn",label:"\u98DE\u5165"},{name:"rollOut",label:"\u98DE\u51FA"}]}],n=at({show:!1,selected:t[0].title,data:t,curAnimation:""}),a=r=>r===n.curAnimation?` animate__animated animate__${r}`:"",u=r=>{n.curAnimation=r},s=()=>{n.curAnimation=""},o=r=>{e.animations||(e.animations=[]);const{animations:i}=e;i.push(C(B({id:pe()},r),{animationDelay:0,animationDuration:1,animationIterationCount:1,repeat:!1})),n.show=!1},c=async(r,i)=>new Promise(h=>{const{animations:f}=e;if(!(f==null?void 0:f[r]))return h();const{name:g,animationDelay:F,animationDuration:E,animationIterationCount:D}=f[r],v="animate__animated",y=`animate__${g}`;i.style.animationDelay=`${F}s`,i.style.animationDuration=`${E}s`,i.style.animationIterationCount=`${D}`,i.classList.add(v,y);const l=()=>{i.removeEventListener("animationend",l),i.removeEventListener("animationcancel",l),i.style.animationDelay="",i.style.animationDuration="",i.style.animationIterationCount="",i.classList.remove(v,y),h()};i.addEventListener("animationend",l),i.addEventListener("animationcancel",l)});return{drawer:n,handleMouseover:u,handleMouseleave:s,getAnimationClass:a,addAnimation:o,playAll:async r=>{if(!!r&&e.animations)for(let i=0;i<t.length;i++)await c(i,r)},play:c}},_t="\u8FDE\u63A5\u51FA\u9519\u4E86~",ve=e=>{const t=typeof e=="string"?e:_t;return Promise.resolve({code:-1e4,msg:t})},wt="/api/v1/",Ct=e=>{const t={400:"\u8BF7\u6C42\u9519\u8BEF(400)",401:"\u672A\u6388\u6743\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55(401)",403:"\u62D2\u7EDD\u8BBF\u95EE(403)",404:"\u8BF7\u6C42\u51FA\u9519(404)",408:"\u8BF7\u6C42\u8D85\u65F6(408)",500:"\u670D\u52A1\u5668\u9519\u8BEF(500)",501:"\u670D\u52A1\u672A\u5B9E\u73B0(501)",502:"\u7F51\u7EDC\u9519\u8BEF(502)",503:"\u670D\u52A1\u4E0D\u53EF\u7528(503)",504:"\u7F51\u7EDC\u8D85\u65F6(504)",505:"HTTP\u7248\u672C\u4E0D\u53D7\u652F\u6301(505)",0:`\u8FDE\u63A5\u51FA\u9519(${e})!`};return`${t[e]||t[0]}\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u8054\u7CFB\u7BA1\u7406\u5458\uFF01`},H=ut.create({baseURL:wt,timeout:1e4,headers:{"Content-Type":"application/json"},transformResponse:[e=>(typeof e=="string"&&e.startsWith("{")&&(e=Oe.parse(e)),e)]});H.interceptors.request.use(e=>{const t=le.get(j.AUTHORIZATION);return t&&e.headers&&(e.headers.authorization=t),e},ve);H.interceptors.response.use(async e=>{const t=e.status;return t<200||t>=300?ve(Ct(t)):e.data},ve);const Ge=(e,t,n)=>H.get(e,C(B({},n),{params:t})),It=(e,t,n)=>H.post(e,t,n),Ot=(e,t,n)=>H.put(e,t,n),kt=(e,t,n)=>H.delete(e,C(B({},n),{params:t})),J="page",Rt=e=>It(J,e),un=e=>kt(`${J}/${e}`),St=e=>Ot(J,e),sn=e=>Ge(`${J}/${e}`),on=()=>Ge(J);var Ke=(e,t)=>{for(const[n,a]of t)e[n]=a;return e};const xt=ue({props:{data:{type:Object,default:()=>({})},patchAll:{type:Boolean,default:!1},editorMode:{type:Boolean,default:!1}},setup(e){const t=ae(),n=fe(()=>e.data);return W(()=>{var s;const{animations:a}=n.value;if(e.editorMode||!a||!((s=t.value)==null?void 0:s.$el))return;const{playAll:u}=Bt(n.value);u(t.value.$el)}),{splitStyleAndPatch:bt,patchUnit:be,box:t}}});function Lt(e,t,n,a,u,s){return P(),me(Re(`cq-${e.data.component}`),{ref:"box",group:e.data.group,data:e.data.data,"props-data":e.data.propsData,style:ke(e.patchAll?e.patchUnit(e.data.style):e.splitStyleAndPatch(e.data.style,!1))},null,8,["group","data","props-data","style"])}var Pt=Ke(xt,[["render",Lt]]);const Tt=["onClick"],Mt=ue({props:{menuType:{type:String,default:()=>"board"},container:Object},setup(e){const t=e,n=w(),a=We(),u=ae(),s=X([{name:"\u7F6E\u9876",icon:Se,event:()=>n.moveUp(!0)},{name:"\u7F6E\u5E95",icon:xe,event:()=>n.moveDown(!0)},{name:"\u4E0A\u79FB\u4E00\u5C42",icon:Le,event:()=>n.moveUp()},{name:"\u4E0B\u79FB\u4E00\u5C42",icon:Pe,event:()=>n.moveDown()},{name:"\u6210\u7EC4",icon:Te,disable:!1,event:()=>n.group()},{name:"\u53D6\u6D88\u6210\u7EC4",icon:Me,disable:!1,event:()=>n.cancelGroup()},{name:"\u9501\u5B9A",icon:ge,disable:!1,event:()=>n.toggleLocked(n.selected)},{name:"\u9690\u85CF",icon:Fe,disable:!1,event:()=>n.hide(n.selected)},{name:"\u590D\u5236",icon:st,event:()=>n.copy()},{name:"\u5220\u9664",icon:ot,event:()=>n.del()}]),o=(d,r,i)=>{if(d.stopPropagation(),r){d.preventDefault();return}a.hide(t.menuType),i()},c=()=>{z("click",d=>{d.stopPropagation(),d.preventDefault(),a.hideAll()})};return W(()=>{s[4].disable=Ze(n),s[5].disable=Je(n),a.setRefAndContainer(t.menuType,u.value,t.container),c()}),(d,r)=>(P(),V("div",{ref:(i,h)=>{h.menuRef=i,lt(u)&&(u.value=i)},class:"board-menu",style:ke(se(be)(se(a)[e.menuType].style)),onMousedown:r[0]||(r[0]=Ue(()=>{},["stop"])),onMouseup:r[1]||(r[1]=Ue(()=>{},["stop"]))},[Ye("ul",null,[(P(!0),V(De,null,Xe(se(s),i=>(P(),V("li",{key:i.name,class:it({"--disable":i.disable}),onClick:h=>o(h,i.disable,i.event)},[(P(),me(Re(i.icon))),Ye("span",null,ct(i.name),1)],10,Tt))),128))])],36))}});var Yt="/assets/logo.8407279e.svg";var ln=ue({name:"layer-panel",setup(){const e=w(),t=Be(),n=We(),a=re(!1),u=ae(),s=[{tip:"\u7F6E\u9876",icon:Se,event:()=>e.moveUp(!0)},{tip:"\u7F6E\u5E95",icon:xe,event:()=>e.moveDown(!0)},{tip:"\u4E0A\u79FB",icon:Le,event:()=>e.moveUp()},{tip:"\u4E0B\u79FB",icon:Pe,event:()=>e.moveDown()}],o=[{tip:"\u6210\u7EC4",icon:Te,event:()=>e.group()},{tip:"\u53D6\u6D88\u6210\u7EC4",icon:Me,event:()=>e.cancelGroup()},{tip:"\u9501\u5B9A",icon:ge,event:()=>e.toggleLocked(e.selected)},{tip:"\u9690\u85CF",icon:Fe,event:()=>e.hide(e.selected)}],c=X({});e.data.forEach(l=>{var p;((p=l==null?void 0:l.group)==null?void 0:p.length)&&(c[l.id]=!1)});const d=fe(()=>{const l=[];return l[0]={disable:Ze(e)},l[1]={disable:Je(e)},l[2]={disable:e.selected.length===0},l[3]={disable:e.selected.length===0},l}),r=fe(()=>a.value?"--item":"--thumbail");function i(l,p){l.stopPropagation(),e.toggleLocked(p)}function h(l,p){l.stopPropagation(),e.show(p)}function f(l,p){l.ctrlKey||l.metaKey?e.changeSelected(p):e.setIndex(p)}function g(l){(l===0&&a.value||l===1&&!a.value)&&(a.value=!a.value)}function F(l){c[l]=!c[l]}function E(l,p){l.preventDefault(),e.selected.includes(p)||e.setIndex(p),n.show(l,Q.LAYER,e)}function D(){return s.map(l=>m(ze,{key:l.icon.name,placement:"bottom",title:l.tip},{default:()=>[m(l.icon,{onClick:l.event,class:U({"--disable":e.selected.length===0})},null)]}))}function v(){return e.data.map((l,p)=>{const{group:b,id:k,locked:G}=l,{display:K}=l.style,R=a.value?m($e,null,null):m("img",{src:Yt},null);let S,x=R,I;if(G&&(I=m(ge,{class:"--icon",onClick:A=>i(A,p)},null)),K==="none"&&(I=m(Fe,{class:"--icon",onClick:A=>h(A,p)},null)),b==null?void 0:b.length){const[A,Y]=c[k]?["rotate(90deg)","block"]:["rotate(0deg)","none"];x=m(pt,{class:"--animated",style:{transform:A},onClick:F.bind(null,k)},null),S=b.map(L=>m("li",{key:L.id,class:U("--animated",r.value),style:{display:Y}},[R,m("b",null,[L.label])]))}return m(De,null,[m("li",{key:l.id,class:U(r.value,{"--active":e.selected.includes(p)}),onContextmenu:A=>E(A,p),onMouseup:A=>f(A,p)},[I,x,m("b",null,[l.label])]),S])})}function y(){return o.map((l,p)=>{const b=d.value[p];return m(ze,{key:l.icon.name,placement:"bottom",title:l.tip},{default:()=>[m(l.icon,{key:l.icon.name,onClick:(b==null?void 0:b.disable)?void 0:l.event,class:U({"--disable":b==null?void 0:b.disable})},null)]})})}return()=>m("div",{class:U("layer-panel",{"--hide":!t.layer}),ref:u},[m("header",{class:"layer-panel__header"},[m("div",null,[rt("\u56FE\u5C42")]),m("section",null,[[dt,$e].map((l,p)=>m(l,{key:l.name,class:U({"--active":p===0?!a.value:a.value}),onClick:g.bind(null,p)},null)),m(ht,{onClick:()=>t.switchPanelShow("layer")},null)])]),m("section",{class:"layer-panel__wrapper"},[m("header",{class:"layer-panel__toolbar"},[D()]),e.data.length===0?m(Ft,{description:"\u5C1A\u672A\u6DFB\u52A0\u4EFB\u4F55\u7EC4\u4EF6"},null):m("ul",{class:"layer-panel__box"},[v()]),n.layer.show&&m(Mt,{"menu-type":Q.LAYER,container:u.value},null)]),m("footer",{class:"layer-panel__footer"},[y()])])}});var ye={maxSnapshot:20,defaultComponentSize:{width:100,height:100},defaultPageSize:{width:1920,height:1080}};const cn={url:"\u63A5\u53E3\u6570\u636E",static:"\u9759\u6001\u6570\u636E"};const Xt={class:"board-group"},Ut=ue({props:{group:{type:Array,default:()=>[]}},setup(e){return(t,n)=>(P(),V("div",Xt,[(P(!0),V(De,null,Xe(e.group,a=>(P(),me(se(Pt),{key:a.id,data:a,"patch-all":""},null,8,["data"]))),128))]))}});var $t=Ke(Ut,[["__scopeId","data-v-644c95db"]]);const zt={"./basic/index.ts":()=>He(()=>import("./index.e0ac5f5a.js"),["assets/index.e0ac5f5a.js","assets/vendor.1aa60481.js","assets/vendor.7d8b91be.css","assets/lodash.52f79bb2.js","assets/ant-design-vue.2c5e11f6.js","assets/ant-design-vue.fd22b5b6.css","assets/node-forge.5968f396.js","assets/echarts.3ce280c0.js","assets/prettier.bc782120.js"]),"./chart/index.ts":()=>He(()=>import("./index.cb6d032d.js"),["assets/index.cb6d032d.js","assets/vendor.1aa60481.js","assets/vendor.7d8b91be.css","assets/lodash.52f79bb2.js","assets/ant-design-vue.2c5e11f6.js","assets/ant-design-vue.fd22b5b6.css","assets/node-forge.5968f396.js","assets/echarts.3ce280c0.js","assets/prettier.bc782120.js"])},Ae={};for(const[e,t]of Object.entries(zt)){const n=e.match(/\.\/(.*)\/index\.ts/);(n==null?void 0:n[1])&&(Ae[n[1]]=t)}const jt=[],qe=[];var rn=async e=>{const t=async n=>{const u=(await n()).default,{name:s,icon:o,components:c,order:d,dataConfig:r}=u,i=[];for(const[h,f]of Object.entries(c)){const F=(await f()).default;F.type=h,F.dataConfig=r||F.dataConfig,e.component(`cq-${h}`,F.component),i.push(F),qe.push(F)}jt[d]={groupName:s,icon:o,list:i}};e.component("cq-group",$t);for(const n in Ae)await t(Ae[n])};const Ht=e=>{const t=qe.find(n=>n.type===e);if(t)return T(t)},w=$("board",{state:()=>({selected:[],data:[],refs:[],offset:{left:0,top:0}}),getters:{curCom(e){return e.selected.length>0?e.data[e.selected[0]]:void 0},curComs(e){return e.selected.map(t=>e.data[t])}},actions:{rawAppend(e){const t=[],n=[];Array.isArray(e)?e.forEach((a,u)=>{t.push(a),n.push(this.data.length+u)}):(t.push(e),n.push(this.data.length)),this.data.push(...t),this.selected=n},append({top:e=0,left:t=0,type:n=""}){const a=Ht(n);if(!a)throw new Error("\u83B7\u53D6\u4E0D\u5230\u8BE5\u7EC4\u4EF6\u4FE1\u606F");const{style:u,data:s,propsData:o}=T(a),c=0,d=1,r=n,i=pe(),h=B(B({top:e,left:t,rotate:c,opacity:d},ye.defaultComponentSize),u),f=a.name;this.rawAppend({id:i,component:r,label:f,propsData:o,style:h,data:s})},del(){this.selected.length>0&&(Ve(this.data,this.selected),this.selected=[],O.success("\u5220\u9664\u6210\u529F\uFF01"))},cancelSelected(){this.selected=[]},setIndex(e){const t=typeof e=="number"?[e]:e,n=[],{data:a}=this;t.forEach(u=>{!a[u].locked&&a[u].style.display!=="none"&&n.push(u)}),this.selected=n},spliceSelected(e){this.selected.splice(this.selected.indexOf(e),1)},appendSelected(e){const{data:t}=this,n=typeof e=="number"?[e]:e,a=[];n.forEach(u=>{!t[u].locked&&t[u].style.display!=="none"&&a.push(u)}),this.selected.push(...a)},changeSelected(e){this.selected.includes(e)?this.spliceSelected(e):this.appendSelected(e)},setBoard(e){e?Object.assign(this,e):(this.data=[],this.selected=[]),de(()=>{const{handleAllEchartsResize:t}=At();t(this)})},copy(){if(this.selected.length>0){const e=this.selected.map(t=>{const n=T(this.data[t]);return n.style.left+=10,n.style.top+=10,n});this.rawAppend(e)}},moveUp(e=!1){const{data:t,selected:n}=this,a=t.length;if(n.length!==0)if(n.length>1)O.error("\u591A\u9009\u65E0\u6CD5\u79FB\u52A8");else if(n[0]===a-1)O.error("\u5DF2\u7ECF\u662F\u6700\u9876\u5C42\uFF01");else{const u=e?a-1:n[0]+1;[t[n[0]],t[u]]=[t[u],t[n[0]]]}},moveDown(e=!1){const{data:t,selected:n}=this;if(n.length!==0)if(n.length>1)O.error("\u591A\u9009\u65E0\u6CD5\u79FB\u52A8");else if(n[0]===0)O.error("\u5DF2\u7ECF\u662F\u6700\u5E95\u5C42\uFF01");else{const a=e?0:n[0]-1;[t[n[0]],t[a]]=[t[a],t[n[0]]]}},calcSelectedByRect(e){this.cancelSelected();const t=[];this.data.forEach((n,a)=>{const{width:u,height:s,left:o,top:c}=n.style,d=Math.min(o,e.left),r=Math.min(c,e.top),i=Math.max(o+u,e.left+e.width),h=Math.max(c+s,e.top+e.height),f=i-d,g=h-r;f<u+e.width&&g<s+e.height&&t.push(a)}),this.setIndex(t)},group(){const{selected:e,data:t}=this,n=Ve(t,e),a=n.reduce((h,f)=>{const{left:g,top:F,width:E,height:D}=f.style;return{leftX:Math.min(h.leftX,g),leftY:Math.min(h.leftY,F),rightX:Math.max(h.rightX,E+g),rightY:Math.max(h.rightY,D+F)}},{leftX:1/0,leftY:1/0,rightX:0,rightY:0}),{leftX:u,leftY:s,rightX:o,rightY:c}=a;n.forEach(h=>{h.style.top-=s,h.style.left-=u});const d=o-u,r=c-s,i={id:pe(),component:"group",label:"\u6210\u7EC4",group:n,style:{top:s,left:u,width:d,height:r,rotate:0,opacity:1}};e.length=0,this.rawAppend(i)},cancelGroup(){const{selected:e,data:t}=this,n=t[e[0]];t.splice(e[0],1);const a=n.group;if(!a)return;const{left:u,top:s}=n.style,o=[];a.forEach(c=>{c.style.left+=u,c.style.top+=s,o.push(c)}),this.rawAppend(o)},toggleLocked(e){const{data:t,selected:n}=this;(typeof e=="number"?[e]:[...e]).forEach(u=>{const s=t[u],o=n.indexOf(u);s.locked=!s.locked,s.locked&&o>-1&&n.splice(o,1)})},hide(e){const{data:t,selected:n}=this;(typeof e=="number"?[e]:[...e]).forEach(u=>{t[u].style.display="none";const s=n.indexOf(u);s>-1&&n.splice(s,1)})},show(e){this.data[e].style.display="block"},selectAll(){const{data:e}=this;this.selected=e.map((t,n)=>n)},clearRefs(){this.refs.length=0},setOffset(e){this.offset=e},pushRef(e){this.refs.push(e)}}}),N=$("page",{state(){const e=C(B({_id:"",__v:0},ye.defaultPageSize),{title:"",description:"",backgroundColor:"",scale:100,gap:1,url:"",zoom:0,author:"",pageMode:0});return{config:e,cache:C(B({},e),{components:[]})}},actions:{updateCache(){const e=w();Object.assign(this.cache,this.config),this.cache.components=T(oe(e.data))},async savePage(){const e=w(),t=ft();if(e.data.length===0){O.error("\u5C1A\u672A\u6DFB\u52A0\u4EFB\u4F55\u7EC4\u4EF6\uFF01");return}const n=T(oe(e.data)),a=B({components:n},this.config),o=a,{_id:u}=o,s=ce(o,["_id"]);if(u)(await St(oe(a))).code===0&&(O.success("\u4FDD\u5B58\u6210\u529F\uFF01"),this.updateCache());else{const c=await Rt(B({},s));c.code===0&&(O.success("\u521B\u5EFA\u6210\u529F\uFF01"),this.config._id=c.data._id,this.updateCache(),t.push(`/editor/${c.data._id}`))}},isModified(){const e=w(),t=C(B({},this.config),{components:oe(e.data)});return JSON.stringify(t)!==JSON.stringify(this.cache)}}}),dn=$("snapshot",{state:()=>({data:[],index:-1}),actions:{undo(){if(this.index>-1){this.index--;const e=this.index===-1?void 0:T(this.data[this.index]);if(e){const{selected:t,page:n}=e,{components:a}=n;w().setBoard({selected:t,data:a})}}},redo(){if(this.index<this.data.length-1){this.index++;const e=w(),t=T(this.data[this.index]),{selected:n,page:a}=t,{components:u}=a;e.setBoard({selected:n,data:u})}},rawRecordSnapshot(e,t){this.data[++this.index]={page:e,selected:t},this.index<this.data.length-1&&(this.data=this.data.slice(0,this.index+1)),this.data.length>ye.maxSnapshot&&this.data.shift(),O.success("\u4FDD\u5B58\u6210\u529F\uFF01")},recordSnapshot(){const e=N(),t=w(),{data:n,selected:a}=t,u=T(n),s=C(B({},e.config),{components:u});this.rawRecordSnapshot(s,a)}}}),hn=$("theme",{state(){return{value:"light"}},actions:{async changeTheme(e){this.value=e,e==="dark"?(gt||await mt(),le.set(j.IS_DARK,1)):le.remove(j.IS_DARK),document.documentElement.setAttribute("data-theme",this.value)},async switchTheme(){const e=le.get(j.IS_DARK);this.changeTheme(e?"light":"dark")}}}),Be=$("panel",{state(){return{layer:!0,component:!0,config:!0,util:!0}},actions:{switchPanelShow(e){this[e]=!this[e]}}});var Q;(function(e){e.BOARD="board",e.LAYER="layer"})(Q||(Q={}));const We=$("menu",{state(){return{board:{show:!1,style:{}},layer:{show:!1,style:{}}}},actions:{show(e,t,n){e.preventDefault();const{pageX:a,pageY:u}=e;n.selected.length!==0&&(this[t].show=!0,de(()=>{const{ref:s,container:o,style:c}=this[t];if(!s||!o)return;const d=10,{width:r,height:i}=s.getBoundingClientRect(),{width:h,height:f,left:g,top:F}=o.getBoundingClientRect();c.left=Math.min(a-g,h-r-d),c.top=Math.min(u-F,f-i-d)}))},hide(e){this[e].show=!1},hideAll(){Object.values(Q).forEach(e=>{this.hide(e)})},setRefAndContainer(e,t,n){this[e].ref=t,this[e].container=n}}});function M(e,t=!1){const a=N().config.scale/100,u=t?e*a:e/a;return Math.floor(u)}const Nt=(e,t,n=".board")=>{const a=document.querySelector(n);if(!a)return;const u=a.getBoundingClientRect();return{top:M(t-u.top),left:M(e-u.left)}},le={set(e,t,n=864e5){const a=typeof t=="string"?t:Oe.stringify(t);return localStorage.setItem(e,a),localStorage.setItem(`${e}__expires__`,Date.now()+n+""),t},get(e){const t=Date.now(),n=localStorage.getItem(`${e}__expires__`)||t+1;if(t>=n){this.remove(e);return}return localStorage.getItem(e)},remove(e){localStorage.removeItem(e),localStorage.removeItem(`${e}__expires__`)}},pn=e=>e.map(t=>C(B({},t),{dataIndex:t.dataIndex||t.key,align:"center",slots:{customRender:t.key}})),Ve=(e,t)=>{const n=t.map(a=>e[a]);return n.forEach(a=>{const u=e.indexOf(a);e.splice(u,1)}),n},Ze=e=>{const{selected:t,data:n}=e;if(t.length<=1)return!0;let a=0;return t.forEach(u=>{if(!n[u])return;const{group:s}=n[u];(!s||s.length===0)&&a++}),a!==t.length},Je=e=>{const{selected:t,data:n}=e;if(t.length!==1)return!0;const{group:a}=n[t[0]];return!(a==null?void 0:a.length)};export{Ht as A,Pt as B,dn as C,cn as D,sn as E,Ne as F,Yt as G,ln as H,It as I,j as L,Q as M,Ke as _,He as a,rn as b,pn as c,un as d,Ge as e,w as f,on as g,N as h,We as i,Z as j,At as k,le as l,Qt as m,tn as n,z as o,be as p,en as q,nn as r,bt as s,an as t,hn as u,Mt as v,M as w,Be as x,jt as y,Bt as z};
