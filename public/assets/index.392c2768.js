import{I as W,l as x,L as A,u as X,_ as Y,G as J}from"./array.6061dcee.js";import{e as B}from"./string.fd2b806e.js";import{t as L}from"./promise.aa1a7cc9.js";import{e3 as S,e4 as Q,d as U,d7 as ee,dt as se,e5 as oe,cV as ae,t as b,r as O,cX as m,c_ as D,dj as w,l as r,cZ as t,D as g,dn as _,u as e,cY as f,dB as re,e2 as te,dA as F,F as V,cW as ne,dk as le,d9 as ie,e6 as ue,e7 as de,dx as ce,dy as me}from"./vendor.bd18f1cd.js";import{F as E,B as pe,u as M,v as y,A as we,w as fe,b as $,I,M as _e,m as j,L as ve,x as ge,y as ye,z as Pe}from"./ant-design-vue.af6cfadf.js";import"./main.6345bfa9.js";import"./lodash.5864dd39.js";import"./node-forge.a6b0f3f3.js";import"./echarts.a540ba97.js";import"./prettier.da792cf3.js";const ze="user",he=i=>W(`${ze}/changePassword`,i),ke=[{key:"page",icon:S,name:"\u9875\u9762\u7BA1\u7406"},{key:"masterplate",icon:Q,name:"\u6A21\u677F\u7BA1\u7406"}];function N(i){i.__i18n=i.__i18n||[],i.__i18n.push({locale:"",resource:{en:{lang:o=>{const{normalize:s}=o;return s(["\u4E2D\u6587"])},exit:o=>{const{normalize:s}=o;return s(["exit"])},modal:{changePassword:o=>{const{normalize:s}=o;return s(["change password"])},oldPassword:o=>{const{normalize:s}=o;return s(["old"])},newPassword:o=>{const{normalize:s}=o;return s(["new"])},confirmPassword:o=>{const{normalize:s}=o;return s(["confirm"])}},validator:{empty:o=>{const{normalize:s}=o;return s(["Password cannot be null."])},length:o=>{const{normalize:s}=o;return s(["Password should start with alphabet, length should be in 6 to 18."])},consistent:o=>{const{normalize:s}=o;return s(["Passwords were inconsistent."])}}},cn:{lang:o=>{const{normalize:s}=o;return s(["English"])},exit:o=>{const{normalize:s}=o;return s(["\u9000\u51FA"])},modal:{changePassword:o=>{const{normalize:s}=o;return s(["\u4FEE\u6539\u5BC6\u7801"])},oldPassword:o=>{const{normalize:s}=o;return s(["\u539F\u5BC6\u7801"])},newPassword:o=>{const{normalize:s}=o;return s(["\u65B0\u5BC6\u7801"])},confirmPassword:o=>{const{normalize:s}=o;return s(["\u786E\u8BA4\u5BC6\u7801"])}},validator:{empty:o=>{const{normalize:s}=o;return s(["\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A\u3002"])},length:o=>{const{normalize:s}=o;return s(["\u5BC6\u7801\u9700\u4EE5\u5B57\u6BCD\u5F00\u5934\uFF0C\u957F\u5EA6\u57286~18\u4E4B\u95F4\u3002"])},consistent:o=>{const{normalize:s}=o;return s(["\u4E24\u6B21\u8F93\u5165\u4E0D\u4E00\u81F4\u3002"])}}}}})}const be={class:"header-right"},Fe={class:"exit-dropdown"},$e={class:"header-right_span"},Ie=g(" \u8FD4\u56DE\u7BA1\u7406\u9875 "),R=U({setup(i){const o=x.get(A.USER_INFO),s=o?ee.parse(o):{},P=se(),c=oe(),z=X(),{locale:l,t:u}=ae(),v=b(!1);function K(){l.value=l.value==="en"?"cn":"en"}const d=O({password:"",newPassword:"",confirmPassword:""}),h=async(p,a)=>a?/^[a-zA-Z]\w{5,17}$/.test(a)?Promise.resolve():Promise.reject(u("validator.length")):Promise.reject(u("validator.empty")),T=O({password:[{required:!0,validator:h,trigger:"blur"}],newPassword:[{required:!0,validator:h,trigger:"blur"}],confirmPassword:[{required:!0,validator:async(p,a)=>{const[n]=await L(h(p,a));return n?Promise.reject(n):a!==d.newPassword?Promise.reject(u("validator.consistent")):Promise.resolve()},trigger:"blur"}]}),{resetFields:q,validate:Z,validateInfos:k}=E.useForm(d,T),H=async()=>{const[p]=await L(Z());if(p)return;const a=B(d.password),n=B(d.newPassword),C=await he({password:a,newPassword:n});C.code===0?(v.value=!1,j.success("\u4FEE\u6539\u6210\u529F\uFF01")):j.error(C.msg)},G=()=>{x.remove(A.AUTHORIZATION),P.push(`/login?redirect=${c.path}`),j.success("\u5DF2\u9000\u51FA\u767B\u5F55\uFF01")};return(p,a)=>(m(),D(V,null,[w("div",be,[r(e(pe),{onClick:a[0]||(a[0]=n=>K())},{default:t(()=>[g(_(e(u)("lang")),1)]),_:1}),r(e(fe),null,{overlay:t(()=>[r(e(M),null,{default:t(()=>[r(e(y),{key:"0",onClick:a[1]||(a[1]=n=>v.value=!0)},{default:t(()=>[g(_(e(u)("modal.changePassword")),1)]),_:1}),p.$route.path.includes("editor")?(m(),f(e(y),{key:"1",onClick:a[2]||(a[2]=n=>p.$router.push("/"))},{default:t(()=>[Ie]),_:1})):re("",!0),r(e(y),{key:"2",onClick:G},{default:t(()=>[g(_(e(u)("exit")),1)]),_:1})]),_:1})]),default:t(()=>[w("div",Fe,[r(e(we),null,{icon:t(()=>[r(e(S))]),_:1}),w("span",$e,_(e(s).name),1)])]),_:1}),r(e(te),{class:"theme-change",onClick:a[3]||(a[3]=n=>e(z).switchTheme())})]),r(e(_e),{visible:v.value,"onUpdate:visible":a[7]||(a[7]=n=>v.value=n),title:e(u)("modal.changePassword"),"after-close":e(q),onOk:H},{default:t(()=>[r(e(E),{model:e(d),"label-col":{span:4},"wrapper-col":{span:16}},{default:t(()=>[r(e($),F({label:e(u)("modal.oldPassword")},e(k).password),{default:t(()=>[r(e(I),{value:e(d).password,"onUpdate:value":a[4]||(a[4]=n=>e(d).password=n),type:"password"},null,8,["value"])]),_:1},16,["label"]),r(e($),F({label:e(u)("modal.newPassword")},e(k).newPassword),{default:t(()=>[r(e(I),{value:e(d).newPassword,"onUpdate:value":a[5]||(a[5]=n=>e(d).newPassword=n),type:"password"},null,8,["value"])]),_:1},16,["label"]),r(e($),F({label:e(u)("modal.confirmPassword")},e(k).confirmPassword),{default:t(()=>[r(e(I),{value:e(d).confirmPassword,"onUpdate:value":a[6]||(a[6]=n=>e(d).confirmPassword=n),type:"password"},null,8,["value"])]),_:1},16,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title","after-close"])],64))}});typeof N=="function"&&N(R);const je=i=>(ce("data-v-027eec89"),i=i(),me(),i),Ce=je(()=>w("div",{class:"logo"},[w("img",{width:"40",height:"40",src:J})],-1)),xe={class:"main"},Ae=U({setup(i){const o=b(["page"]),s=b(!1);return(P,c)=>{const z=ne("RouterView");return m(),f(e(ve),{class:"container"},{default:t(()=>[r(e(ge),{collapsed:s.value,"onUpdate:collapsed":c[1]||(c[1]=l=>s.value=l),trigger:null,collapsible:""},{default:t(()=>[Ce,r(e(M),{selectedKeys:o.value,"onUpdate:selectedKeys":c[0]||(c[0]=l=>o.value=l),theme:"dark",mode:"inline"},{default:t(()=>[(m(!0),D(V,null,le(e(ke),l=>(m(),f(e(y),{key:l.key,onClick:u=>P.$router.push({name:l.key})},{default:t(()=>[(m(),f(ie(l.icon))),w("span",null,_(l.name),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["selectedKeys"])]),_:1},8,["collapsed"]),w("div",xe,[r(e(ye),{class:"layout-header"},{default:t(()=>[s.value?(m(),f(e(ue),{key:0,class:"trigger",onClick:c[2]||(c[2]=l=>s.value=!s.value)})):(m(),f(e(de),{key:1,class:"trigger",onClick:c[3]||(c[3]=l=>s.value=!s.value)})),r(R)]),_:1}),r(e(Pe),{class:"layout-content"},{default:t(()=>[r(z)]),_:1})])]),_:1})}}});var Ke=Y(Ae,[["__scopeId","data-v-027eec89"]]);export{Ke as default};
