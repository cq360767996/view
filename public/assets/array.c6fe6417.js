var Je=Object.defineProperty,Qe=Object.defineProperties;var et=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var we=(e,t,n)=>t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v=(e,t)=>{for(var n in t||(t={}))Be.call(t,n)&&we(e,n,t[n]);if(te)for(var n of te(t))_e.call(t,n)&&we(e,n,t[n]);return e},w=(e,t)=>Qe(e,et(t));var ie=(e,t)=>{var n={};for(var a in e)Be.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&te)for(var a of te(e))t.indexOf(a)<0&&_e.call(e,a)&&(n[a]=e[a]);return n};import{r as Y,P as ne,t as ce,o as W,x as re,y as Ce,q as de,w as tt,d2 as nt,d3 as he,d4 as at,d5 as Oe,d as ae,k as pe,cW as I,cX as fe,d6 as ke,d7 as Ie,d8 as Re,d9 as Se,da as xe,db as Le,dc as Pe,dd as Te,de as me,a5 as ge,df as ut,dg as st,cZ as q,dh as Me,F as Fe,di as Xe,u as ue,dj as ot,N as Ye,dk as lt,dl as it,l as g,D as ct,dm as rt,dn as $e,ae as dt,Y as ht,dp as $,Z as se,dq as pt,dr as ft,ds as mt}from"./vendor.2f48f3fc.js";import{k as De,l as R}from"./lodash.5864dd39.js";import{T as Ue,E as gt,m as O}from"./ant-design-vue.690beb7d.js";import"./node-forge.a6b0f3f3.js";import{g as Ft}from"./echarts.6d889a97.js";import"./prettier.da792cf3.js";const Dt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const s of u)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(u){const s={};return u.integrity&&(s.integrity=u.integrity),u.referrerpolicy&&(s.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?s.credentials="include":u.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(u){if(u.ep)return;u.ep=!0;const s=n(u);fetch(u.href,s)}};Dt();const U=(e,t,n)=>{document.addEventListener(e,t,n)},V=(e,t,n)=>{document.removeEventListener(e,t,n)},be=e=>{const t=["width","height","top","left","bottom","right","fontSize","borderWidth","borderRadius"],n={};for(const[a,u]of Object.entries(e))if(!!u){if(a==="rotate"){n.transform=`rotate(${u}deg)`;continue}if(a==="scale"){n.transform=`scale(${u/100})`;continue}n[a]=t.includes(a)?u+"px":u}return n},bt=(e,t=!0)=>{const d=e,{width:n,height:a,left:u,top:s}=d,o=ie(d,["width","height","left","top"]),c=t?{width:n,height:a,left:u,top:s}:v({},o);return be(c)},Et="modulepreload",ze={},vt="/",je=function(t,n){return!n||n.length===0?t():Promise.all(n.map(a=>{if(a=`${vt}${a}`,a in ze)return;ze[a]=!0;const u=a.endsWith(".css"),s=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${s}`))return;const o=document.createElement("link");if(o.rel=u?"stylesheet":Et,u||(o.as="script",o.crossOrigin=""),o.href=a,document.head.appendChild(o),u)return new Promise((c,d)=>{o.addEventListener("load",c),o.addEventListener("error",d)})})).then(()=>t())};var He;(function(e){e.RADIO="radio",e.CHECKBOX="checkbox",e.INPUT="input",e.INPUT_NUMBER="input-number",e.SELECT="select",e.SWITCH="switch",e.SLIDER="slider",e.COLOR_PICKER="color-picker",e.BTN_GROUP="btn-group",e.TEXTAREA="textarea",e.CUSTOM="custom"})(He||(He={}));var z;(function(e){e.USER_INFO="user-info",e.AUTHORIZATION="authorization",e.IS_DARK="is-dark"})(z||(z={}));var B;(function(e){e.X="x",e.Y="y"})(B||(B={}));const Jt=()=>{const e=_(),t=Y({show:!1,style:{width:0,height:0,top:0,left:0}});return{selectMask:t,handleMousedown:a=>{if(a.buttons===1){t.show=!0;const{pageX:u,pageY:s}=a,o=Ht(u,s);if(!o)return;t.style=w(v(v({},t.style),o),{width:0,height:0});const c=r=>{const{pageX:i,pageY:h}=r,f=S(i-u),F=S(h-s);f<0&&(t.style.left=o.left+f),F<0&&(t.style.top=o.top+F),t.style.width=Math.abs(f),t.style.height=Math.abs(F),e.calcSelectedByRect(t.style)},d=r=>{r.stopPropagation(),V("mousemove",c),V("mouseup",d),t.show=!1,r.clientX==u&&r.clientY==s&&e.cancelSelected()};U("mousemove",c),U("mouseup",d)}}}},yt=()=>{const e=n=>{const u=_().refs[n];if(u){const s=Ft(u);s==null||s.resize()}};return{handleEchartsResize:e,handleAllEchartsResize:n=>{for(let a=0,u=n.data.length;a<u;a++)e(a)}}},Qt=(e,t,n)=>{const a=ne(),u=Y({width:0,height:0,top:0,left:0}),s=ce(!0),o=H(),c=Ae(),d=()=>{if(!e.value||!t.value||!a.value)return;const{width:E,height:l}=e.value.getBoundingClientRect(),{width:p,height:m}=t.value.getBoundingClientRect(),{width:D,height:A}=a.value.getBoundingClientRect(),x=p/E,k=m/l;u.width=Math.min(x*D,D),u.height=Math.min(k*A,A),n.value++},r=E=>{if(E.buttons!==1||!a.value)return;const l=E.target;let p=E.clientX,m=E.clientY,{left:D,top:A}=u;const{width:x,height:k}=a.value.getBoundingClientRect(),{width:T,height:M}=l.getBoundingClientRect(),C=x-T,y=k-M,L=X=>{if(X.stopPropagation(),!t.value||!e.value)return;const{clientX:N,clientY:G}=X,K=N-p,le=G-m;let Q=0,ee=0;K<0&&u.left<=0?(p=N,D=0,Q=0):K>=0&&u.left>=C?(p=N,D=C,Q=C):Q=D+K,le<0&&u.top<=0?(m=G,A=0,ee=0):le>=0&&u.top>=y?(m=G,A=y,ee=y):ee=A+le,u.left=Q,u.top=ee},P=X=>{X.stopPropagation(),V("mousemove",L),V("mouseup",P)};U("mousemove",L),U("mouseup",P)},i=()=>{if(!e.value||!t.value||!a.value)return;const E=H(),l=a.value.getContext("2d");if(!l)return;const{width:p,height:m}=a.value;l.clearRect(0,0,p,m);const{width:D,height:A}=a.value.getBoundingClientRect(),{width:x,height:k}=e.value.getBoundingClientRect(),{width:T,height:M}=E.config,C=D/S(x),y=A/S(k),L=C*2,P=y*2,X=T*L,N=M*P,G=60*L,K=60*P;l.strokeStyle="#1890ff",l.lineWidth=2,l.strokeRect(G,K,X,N)},h=De(d,100),f=De(i,100),F=()=>{if(!e.value||!t.value||!a.value)return;const{width:E,height:l}=e.value.getBoundingClientRect(),{width:p,height:m}=a.value.getBoundingClientRect(),{scrollLeft:D,scrollTop:A}=t.value;u.left=D/E*p,u.top=A/l*m};return W(()=>{window.addEventListener("resize",h),window.addEventListener("resize",f),re(()=>{d(),i()})}),Ce(()=>{window.removeEventListener("resize",h),window.removeEventListener("resize",f)}),de(()=>{if(!t.value||!a.value||!e.value)return;const{width:E,height:l}=e.value.getBoundingClientRect(),{width:p,height:m}=a.value.getBoundingClientRect(),D=u.left*E/p,A=u.top*l/m;t.value.scroll(D,A)}),tt(c,()=>{setTimeout(()=>{d(),i()},300)}),de(()=>{o.config.scale&&(h(),f())}),{viewportSize:u,resizeViewport:d,thumbnailRef:a,handleThumbnailMousedown:r,syncScroll:F,showThumbnail:s,switchThumbnail:()=>{s.value=!s.value}}},en=e=>{const t=H(),n=Y({width:0,height:0}),a=ce(0),u=c=>c+"%",s=()=>{if(!e.value)return;const{width:c,height:d}=e.value.getBoundingClientRect(),{width:r,height:i}=t.config,h=S(r+400,!0),f=S(i+400,!0),F=c-4,b=d-4;n.width=h<=F?F:h,n.height=f<=b?b:f,a.value++},o=De(s,100);return W(()=>{de(()=>{t.config.scale&&s()})}),{sliderFormatter:u,handleSliderChange:o,screenShotSize:n,rulerKey:a}},tn=()=>{const e=Y([{direction:B.X,marklineDct:B.Y,marklines:[]},{direction:B.Y,marklineDct:B.X,marklines:[]}]);return{rulerData:e,getStyle:(s,o)=>{const c=s===B.Y?" rotate(90deg)":"",d=s===B.Y?"top":"left";return`transform:${c} translateX(${o[d]}px)`},getUnit:s=>s===B.X?"width":"height",addMarkline:(s,o)=>{const{clientX:c,clientY:d}=s,r=s.target,{left:i,top:h}=r.getBoundingClientRect(),[f,F]=o===B.X?[d-h,1]:[c-i,0];e[F].marklines.push(f)},cancelMarkline:(s,o)=>{const c=o===B.X?0:1;e[c].marklines.splice(s,1)}}},nn=()=>{const e=H(),t=Ae(),n=_(),a={Backspace:()=>n.del(),a:s=>s&&n.selectAll(),s:s=>s&&e.savePage(),c:s=>s&&n.copy(),ArrowLeft:s=>{s?t.switchPanelShow("layer"):n.selected.forEach(o=>{n.data[o].style.left-=e.config.gap})},ArrowUp:s=>{s?t.switchPanelShow("component"):n.selected.forEach(o=>{n.data[o].style.top-=e.config.gap})},ArrowRight:s=>{s?t.switchPanelShow("config"):n.selected.forEach(o=>{n.data[o].style.left+=e.config.gap})},ArrowDown:()=>{n.selected.forEach(s=>{n.data[s].style.top+=e.config.gap})}},u=s=>{var c;if(!((c=document.querySelector(".canvas-wrapper"))==null?void 0:c.contains(document.activeElement)))return;const o=a[s.key];if(o){s.preventDefault(),s.stopPropagation();const d=s.ctrlKey||s.metaKey;o(d)}};W(()=>U("keydown",u)),Ce(()=>V("keydown",u))},At=e=>{const t=[{title:"\u5F3A\u8C03",data:[{name:"bounce",label:"\u5F39\u8DF3"},{name:"flash",label:"\u95EA\u70C1"},{name:"pulse",label:"\u653E\u5927\u7F29\u5C0F"},{name:"rubberBand",label:"\u653E\u5927\u7F29\u5C0F\u5F39\u7C27"},{name:"shakeX",label:"\u5DE6\u53F3\u6643\u52A8"},{name:"shakeY",label:"\u4E0A\u4E0B\u6643\u52A8"},{name:"headShake",label:"\u5DE6\u53F3\u5C0F\u5E45\u6643\u52A8"},{name:"swing",label:"\u5DE6\u53F3\u6247\u5F62\u6447\u6446"},{name:"tada",label:"\u653E\u5927\u6643\u52A8\u7F29\u5C0F"},{name:"wobble",label:"\u5C0F\u5E45\u6247\u5F62\u6447\u6446"},{name:"jello",label:"\u679C\u51BB\u6447\u6643"},{name:"heartBeat",label:"Y\u8F74\u65CB\u8F6C"}]},{title:"\u5EF6\u8FDF",data:[{name:"backInDown",label:"\u5EF6\u8FDF\u4E0A\u65B9\u8FDB\u5165"},{name:"backInLeft",label:"\u5EF6\u8FDF\u5DE6\u4FA7\u8FDB\u5165"},{name:"backInRight",label:"\u5EF6\u8FDF\u53F3\u4FA7\u8FDB\u5165"},{name:"backInUp",label:"\u5EF6\u8FDF\u4E0B\u65B9\u8FDB\u5165"},{name:"backOutDown",label:"\u5EF6\u8FDF\u4E0B\u65B9\u9000\u51FA"},{name:"backOutLeft",label:"\u5EF6\u8FDF\u5DE6\u4FA7\u9000\u51FA"},{name:"backOutRight",label:"\u5EF6\u8FDF\u53F3\u4FA7\u9000\u51FA"},{name:"backOutUp",label:"\u5EF6\u8FDF\u4E0A\u65B9\u9000\u51FA"}]},{title:"\u8DF3\u8DC3",data:[{name:"bounceIn",label:"\u8DF3\u8DC3\u8FDB\u5165"},{name:"bounceInDown",label:"\u4E0A\u65B9\u8DF3\u8DC3\u8FDB\u5165"},{name:"bounceInLeft",label:"\u5DE6\u4FA7\u8DF3\u8DC3\u8FDB\u5165"},{name:"bounceInRight",label:"\u53F3\u4FA7\u8DF3\u8DC3\u8FDB\u5165"},{name:"bounceInUp",label:"\u4E0B\u65B9\u8DF3\u8DC3\u8FDB\u5165"},{name:"bounceOut",label:"\u8DF3\u8DC3\u9000\u51FA"},{name:"bounceOutDown",label:"\u4E0B\u65B9\u8DF3\u8DC3\u9000\u51FA"},{name:"bounceOutLeft",label:"\u5DE6\u4FA7\u8DF3\u8DC3\u9000\u51FA"},{name:"bounceOutRight",label:"\u53F3\u4FA7\u8DF3\u8DC3\u9000\u51FA"},{name:"bounceOutUp",label:"\u4E0A\u65B9\u8DF3\u8DC3\u9000\u51FA"}]},{title:"\u6DE1\u5165/\u6DE1\u51FA",data:[{name:"fadeIn",label:"\u6DE1\u5165"},{name:"fadeInDown",label:"\u4E0A\u65B9\u6DE1\u5165"},{name:"fadeInDownBig",label:"\u4E0A\u65B9\u8FDC\u8DDD\u79BB\u6DE1\u5165"},{name:"fadeInLeft",label:"\u5DE6\u4FA7\u6DE1\u5165"},{name:"fadeInLeftBig",label:"\u5DE6\u4FA7\u8FDC\u8DDD\u79BB\u6DE1\u5165"},{name:"fadeInRight",label:"\u53F3\u4FA7\u6DE1\u5165"},{name:"fadeInRightBig",label:"\u53F3\u4FA7\u8FDC\u8DDD\u79BB\u6DE1\u5165"},{name:"fadeInUp",label:"\u4E0A\u65B9\u6DE1\u5165"},{name:"fadeInUpBig",label:"\u4E0A\u65B9\u8FDC\u8DDD\u79BB\u6DE1\u5165"},{name:"fadeInTopLeft",label:"\u5DE6\u4E0A\u6DE1\u5165"},{name:"fadeInTopRight",label:"\u53F3\u4E0A\u6DE1\u5165"},{name:"fadeInBottomLeft",label:"\u5DE6\u4E0B\u6DE1\u5165"},{name:"fadeInBottomRight",label:"\u53F3\u4E0B\u6DE1\u5165"},{name:"fadeOut",label:"\u6DE1\u51FA"},{name:"fadeOutDown",label:"\u4E0B\u65B9\u6DE1\u51FA"},{name:"fadeOutDownBig",label:"\u4E0B\u65B9\u8FDC\u8DDD\u79BB\u6DE1\u51FA"},{name:"fadeOutLeft",label:"\u5DE6\u4FA7\u6DE1\u51FA"},{name:"fadeOutLeftBig",label:"\u5DE6\u4FA7\u8FDC\u8DDD\u79BB\u6DE1\u51FA"},{name:"fadeOutRight",label:"\u53F3\u4FA7\u6DE1\u51FA"},{name:"fadeOutRightBig",label:"\u53F3\u4FA7\u8FDC\u8DDD\u79BB\u6DE1\u51FA"},{name:"fadeOutUp",label:"\u4E0A\u65B9\u6DE1\u51FA"},{name:"fadeOutUpBig",label:"\u4E0A\u65B9\u8FDC\u8DDD\u79BB\u6DE1\u51FA"},{name:"fadeOutTopLeft",label:"\u5DE6\u4E0A\u6DE1\u51FA"},{name:"fadeOutTopRight",label:"\u53F3\u4E0A\u6DE1\u51FA"},{name:"fadeOutBottomRight",label:"\u5DE6\u4E0B\u6DE1\u51FA"},{name:"fadeOutBottomLeft",label:"\u53F3\u4E0B\u6DE1\u51FA"}]},{title:"\u7FFB\u8F6C",data:[{name:"flip",label:"\u7FFB\u8F6C"},{name:"flipInX",label:"\u6A2A\u5411\u7FFB\u8F6C\u8FDB\u5165"},{name:"flipInY",label:"\u7EB5\u5411\u7FFB\u8F6C\u8FDB\u5165"},{name:"flipOutX",label:"\u6A2A\u5411\u7FFB\u8F6C\u9000\u51FA"},{name:"flipOutY",label:"\u7EB5\u5411\u7FFB\u8F6C\u9000\u51FA"}]},{title:"\u5149\u901F",data:[{name:"lightSpeedInRight",label:"\u53F3\u4FA7\u5149\u901F\u8FDB\u5165"},{name:"lightSpeedInLeft",label:"\u5DE6\u4FA7\u5149\u901F\u8FDB\u5165"},{name:"lightSpeedOutRight",label:"\u53F3\u4FA7\u5149\u901F\u9000\u51FA"},{name:"lightSpeedOutLeft",label:"\u5DE6\u4FA7\u5149\u901F\u9000\u51FA"}]},{title:"\u65CB\u8F6C",data:[{name:"rotateIn",label:"\u65CB\u8F6C\u8FDB\u5165"},{name:"rotateInDownLeft",label:"\u5DE6\u4E0A\u65CB\u8F6C\u8FDB\u5165"},{name:"rotateInDownRight",label:"\u53F3\u4E0A\u65CB\u8F6C\u8FDB\u5165"},{name:"rotateInUpLeft",label:"\u53F3\u4E0B\u65CB\u8F6C\u8FDB\u5165"},{name:"rotateInUpRight",label:"\u5DE6\u4E0B\u65CB\u8F6C\u8FDB\u5165"},{name:"rotateOut",label:"\u65CB\u8F6C\u9000\u51FA"},{name:"rotateOutDownLeft",label:"\u5DE6\u4E0B\u65CB\u8F6C\u9000\u51FA"},{name:"rotateOutDownRight",label:"\u53F3\u4E0B\u65CB\u8F6C\u9000\u51FA"},{name:"rotateOutUpLeft",label:"\u5DE6\u4E0A\u65CB\u8F6C\u9000\u51FA"},{name:"rotateOutUpRight",label:"\u53F3\u4E0A\u65CB\u8F6C\u9000\u51FA"}]},{title:"\u653E\u7F29",data:[{name:"zoomIn",label:"\u653E\u7F29\u8FDB\u5165"},{name:"zoomInDown",label:"\u4E0A\u65B9\u653E\u7F29\u8FDB\u5165"},{name:"zoomInLeft",label:"\u5DE6\u4FA7\u653E\u7F29\u8FDB\u5165"},{name:"zoomInRight",label:"\u53F3\u4FA7\u653E\u7F29\u8FDB\u5165"},{name:"zoomInUp",label:"\u4E0B\u65B9\u653E\u7F29\u8FDB\u5165"},{name:"zoomOut",label:"\u653E\u7F29\u9000\u51FA"},{name:"zoomOutDown",label:"\u4E0B\u65B9\u653E\u7F29\u9000\u51FA"},{name:"zoomOutLeft",label:"\u5DE6\u4FA7\u653E\u7F29\u9000\u51FA"},{name:"zoomOutRight",label:"\u53F3\u4FA7\u653E\u7F29\u9000\u51FA"},{name:"zoomOutUp",label:"\u4E0A\u65B9\u653E\u7F29\u9000\u51FA"}]},{title:"\u6ED1\u52A8",data:[{name:"slideInDown",label:"\u4E0A\u65B9\u6ED1\u5165"},{name:"slideInLeft",label:"\u5DE6\u4FA7\u6ED1\u5165"},{name:"slideInRight",label:"\u53F3\u4FA7\u6ED1\u5165"},{name:"slideInUp",label:"\u4E0B\u65B9\u6ED1\u5165"},{name:"slideOutDown",label:"\u4E0B\u65B9\u6ED1\u51FA"},{name:"slideOutLeft",label:"\u5DE6\u4FA7\u6ED1\u51FA"},{name:"slideOutRight",label:"\u53F3\u4FA7\u6ED1\u51FA"},{name:"slideOutUp",label:"\u4E0A\u65B9\u6ED1\u51FA"}]},{title:"\u7279\u6B8A",data:[{name:"hinge",label:"\u60AC\u6302\u6389\u843D"},{name:"jackInTheBox",label:"\u4E0B\u65B9\u98DE\u5165"},{name:"rollIn",label:"\u98DE\u5165"},{name:"rollOut",label:"\u98DE\u51FA"}]}],n=nt({show:!1,selected:t[0].title,data:t,curAnimation:""}),a=r=>r===n.curAnimation?` animate__animated animate__${r}`:"",u=r=>{n.curAnimation=r},s=()=>{n.curAnimation=""},o=r=>{e.animations||(e.animations=[]);const{animations:i}=e;i.push(w(v({id:he()},r),{animationDelay:0,animationDuration:1,animationIterationCount:1,repeat:!1})),n.show=!1},c=async(r,i)=>new Promise(h=>{const{animations:f}=e;if(!(f==null?void 0:f[r]))return h();const{name:F,animationDelay:b,animationDuration:E,animationIterationCount:l}=f[r],p="animate__animated",m=`animate__${F}`;i.style.animationDelay=`${b}s`,i.style.animationDuration=`${E}s`,i.style.animationIterationCount=`${l}`,i.classList.add(p,m);const D=()=>{i.removeEventListener("animationend",D),i.removeEventListener("animationcancel",D),i.style.animationDelay="",i.style.animationDuration="",i.style.animationIterationCount="",i.classList.remove(p,m),h()};i.addEventListener("animationend",D),i.addEventListener("animationcancel",D)});return{drawer:n,handleMouseover:u,handleMouseleave:s,getAnimationClass:a,addAnimation:o,playAll:async r=>{if(!!r&&e.animations)for(let i=0;i<t.length;i++)await c(i,r)},play:c}},Bt="\u8FDE\u63A5\u51FA\u9519\u4E86~",Ee=e=>{const t=typeof e=="string"?e:Bt;return Promise.resolve({code:-1e4,msg:t})},_t="/api/v1/",wt=e=>{const t={400:"\u8BF7\u6C42\u9519\u8BEF(400)",401:"\u672A\u6388\u6743\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55(401)",403:"\u62D2\u7EDD\u8BBF\u95EE(403)",404:"\u8BF7\u6C42\u51FA\u9519(404)",408:"\u8BF7\u6C42\u8D85\u65F6(408)",500:"\u670D\u52A1\u5668\u9519\u8BEF(500)",501:"\u670D\u52A1\u672A\u5B9E\u73B0(501)",502:"\u7F51\u7EDC\u9519\u8BEF(502)",503:"\u670D\u52A1\u4E0D\u53EF\u7528(503)",504:"\u7F51\u7EDC\u8D85\u65F6(504)",505:"HTTP\u7248\u672C\u4E0D\u53D7\u652F\u6301(505)",0:`\u8FDE\u63A5\u51FA\u9519(${e})!`};return`${t[e]||t[0]}\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u8054\u7CFB\u7BA1\u7406\u5458\uFF01`},j=at.create({baseURL:_t,timeout:1e4,headers:{"Content-Type":"application/json"},transformResponse:[e=>(typeof e=="string"&&e.startsWith("{")&&(e=Oe.parse(e)),e)]});j.interceptors.request.use(e=>{const t=oe.get(z.AUTHORIZATION);return t&&e.headers&&(e.headers.authorization=t),e},Ee);j.interceptors.response.use(async e=>{const t=e.status;return t<200||t>=300?Ee(wt(t)):e.data},Ee);const Ne=(e,t,n)=>j.get(e,w(v({},n),{params:t})),Ct=(e,t,n)=>j.post(e,t,n),Ot=(e,t,n)=>j.put(e,t,n),kt=(e,t,n)=>j.delete(e,w(v({},n),{params:t})),Z="page",It=e=>Ct(Z,e),an=e=>kt(`${Z}/${e}`),Rt=e=>Ot(Z,e),un=e=>Ne(`${Z}/${e}`),sn=()=>Ne(Z);var Ge=(e,t)=>{for(const[n,a]of t)e[n]=a;return e};const St=ae({props:{data:{type:Object,default:()=>({})},patchAll:{type:Boolean,default:!1},editorMode:{type:Boolean,default:!1}},setup(e){const t=ne(),n=pe(()=>e.data);return W(()=>{var s;const{animations:a}=n.value;if(e.editorMode||!a||!((s=t.value)==null?void 0:s.$el))return;const{playAll:u}=At(n.value);u(t.value.$el)}),{splitStyleAndPatch:bt,patchUnit:be,box:t}}});function xt(e,t,n,a,u,s){return I(),fe(Ie(`cq-${e.data.component}`),{ref:"box",group:e.data.group,data:e.data.data,"props-data":e.data.propsData,style:ke(e.patchAll?e.patchUnit(e.data.style):e.splitStyleAndPatch(e.data.style,!1))},null,8,["group","data","props-data","style"])}var Lt=Ge(St,[["render",xt]]);const Pt=["onClick"],Tt=ae({props:{menuType:{type:String,default:()=>"board"},container:Object},setup(e){const t=e,n=_(),a=We(),u=ne(),s=Y([{name:"\u7F6E\u9876",icon:Re,event:()=>n.moveUp(!0)},{name:"\u7F6E\u5E95",icon:Se,event:()=>n.moveDown(!0)},{name:"\u4E0A\u79FB\u4E00\u5C42",icon:xe,event:()=>n.moveUp()},{name:"\u4E0B\u79FB\u4E00\u5C42",icon:Le,event:()=>n.moveDown()},{name:"\u6210\u7EC4",icon:Pe,disable:!1,event:()=>n.group()},{name:"\u53D6\u6D88\u6210\u7EC4",icon:Te,disable:!1,event:()=>n.cancelGroup()},{name:"\u9501\u5B9A",icon:me,disable:!1,event:()=>n.toggleLocked(n.selected)},{name:"\u9690\u85CF",icon:ge,disable:!1,event:()=>n.hide(n.selected)},{name:"\u590D\u5236",icon:ut,event:()=>n.copy()},{name:"\u5220\u9664",icon:st,event:()=>n.del()}]),o=(d,r,i)=>{if(d.stopPropagation(),r){d.preventDefault();return}a.hide(t.menuType),i()},c=()=>{U("click",d=>{d.stopPropagation(),d.preventDefault(),a.hideAll()})};return W(()=>{s[4].disable=Ve(n),s[5].disable=Ze(n),a.setRefAndContainer(t.menuType,u.value,t.container),c()}),(d,r)=>(I(),q("div",{ref:(i,h)=>{h.menuRef=i,ot(u)&&(u.value=i)},class:"board-menu",style:ke(ue(be)(ue(a)[e.menuType].style)),onMousedown:r[0]||(r[0]=Ye(()=>{},["stop"])),onMouseup:r[1]||(r[1]=Ye(()=>{},["stop"]))},[Me("ul",null,[(I(!0),q(Fe,null,Xe(ue(s),i=>(I(),q("li",{key:i.name,class:lt({"--disable":i.disable}),onClick:h=>o(h,i.disable,i.event)},[(I(),fe(Ie(i.icon))),Me("span",null,it(i.name),1)],10,Pt))),128))])],36))}});var Mt="/assets/logo.8407279e.svg";var on=ae({name:"layer-panel",setup(){const e=_(),t=Ae(),n=We(),a=ce(!1),u=ne(),s=(l,p)=>{l.stopPropagation(),e.toggleLocked(p)},o=(l,p)=>{l.stopPropagation(),e.show(p)},c=[{tip:"\u7F6E\u9876",icon:Re,event:()=>e.moveUp(!0)},{tip:"\u7F6E\u5E95",icon:Se,event:()=>e.moveDown(!0)},{tip:"\u4E0A\u79FB",icon:xe,event:()=>e.moveUp()},{tip:"\u4E0B\u79FB",icon:Le,event:()=>e.moveDown()}],d=[{tip:"\u6210\u7EC4",icon:Pe,event:()=>e.group()},{tip:"\u53D6\u6D88\u6210\u7EC4",icon:Te,event:()=>e.cancelGroup()},{tip:"\u9501\u5B9A",icon:me,event:()=>e.toggleLocked(e.selected)},{tip:"\u9690\u85CF",icon:ge,event:()=>e.hide(e.selected)}],r=(l,p)=>{l.ctrlKey||l.metaKey?e.changeSelected(p):e.setIndex(p)},i=l=>{(l===0&&a.value||l===1&&!a.value)&&(a.value=!a.value)},h=Y({});e.data.forEach(l=>{var p;((p=l==null?void 0:l.group)==null?void 0:p.length)&&(h[l.id]=!1)});const f=l=>{h[l]=!h[l]},F=(l,p)=>{l.preventDefault(),e.selected.includes(p)||e.setIndex(p),n.show(l,J.LAYER,e)},b=pe(()=>{const l=[];return l[0]={disable:Ve(e)},l[1]={disable:Ze(e)},l[2]={disable:e.selected.length===0},l[3]={disable:e.selected.length===0},l}),E=pe(()=>a.value?"--item":"--thumbail");return()=>g("div",{class:`layer-panel${t.layer?"":" --hide"}`,ref:u},[g("header",{class:"layer-panel__header"},[g("div",null,[ct("\u56FE\u5C42")]),g("section",null,[[rt,$e].map((l,p)=>g(l,{key:l.name,class:(p===0?!a.value:a.value)&&"--active",onClick:i.bind(null,p)},null)),g(dt,{onClick:()=>{t.switchPanelShow("layer")}},null)])]),g("section",{class:"layer-panel__wrapper"},[g("header",{class:"layer-panel__toolbar"},[c.map(l=>g(Ue,{key:l.icon.name,placement:"bottom",title:l.tip},{default:()=>[g(l.icon,{onClick:l.event,class:e.selected.length===0&&"--disable"},null)]}))]),e.data.length===0?g(gt,{description:"\u5C1A\u672A\u6DFB\u52A0\u4EFB\u4F55\u7EC4\u4EF6"},null):g("ul",{class:"layer-panel__box"},[e.data.map((l,p)=>{const{group:m,id:D,locked:A}=l,{display:x}=l.style,k=a.value?g($e,null,null):g("img",{src:Mt},null);let T,M=k,C;if(A&&(C=g(me,{class:"--icon",onClick:y=>s(y,p)},null)),x==="none"&&(C=g(ge,{class:"--icon",onClick:y=>o(y,p)},null)),m==null?void 0:m.length){const[y,L]=h[D]?["rotate(90deg)","block"]:["rotate(0deg)","none"];M=g(ht,{class:"--animated",style:{transform:y},onClick:f.bind(null,D)},null),T=m.map(P=>g("li",{class:`--animated ${E.value}`,style:{display:L}},[k,g("b",null,[P.label])]))}return g(Fe,null,[g("li",{class:`${E.value}${e.selected.includes(p)?" --active":""}`,onContextmenu:y=>F(y,p),onMouseup:y=>r(y,p)},[C,M,g("b",null,[l.label])]),T])})]),n.layer.show&&g(Tt,{"menu-type":J.LAYER,container:u.value},null)]),g("footer",{class:"layer-panel__footer"},[d.map((l,p)=>{const m=b.value[p];return g(Ue,{key:l.icon.name,placement:"bottom",title:l.tip},{default:()=>[g(l.icon,{key:l.icon.name,onClick:(m==null?void 0:m.disable)?void 0:l.event,class:(m==null?void 0:m.disable)&&"--disable"},null)]})})])])}});var ve={maxSnapshot:20,defaultComponentSize:{width:100,height:100},defaultPageSize:{width:1920,height:1080}};const ln={url:"\u63A5\u53E3\u6570\u636E",static:"\u9759\u6001\u6570\u636E"};const Xt={class:"board-group"},Yt=ae({props:{group:{type:Array,default:()=>[]}},setup(e){return(t,n)=>(I(),q("div",Xt,[(I(!0),q(Fe,null,Xe(e.group,a=>(I(),fe(ue(Lt),{key:a.id,data:a,"patch-all":""},null,8,["data"]))),128))]))}});var $t=Ge(Yt,[["__scopeId","data-v-644c95db"]]);const Ut={"./basic/index.ts":()=>je(()=>import("./index.dc6b0d86.js"),["assets/index.dc6b0d86.js","assets/vendor.2f48f3fc.js","assets/vendor.266bc503.css","assets/lodash.5864dd39.js","assets/ant-design-vue.690beb7d.js","assets/ant-design-vue.0f4a9536.css","assets/node-forge.a6b0f3f3.js","assets/echarts.6d889a97.js","assets/prettier.da792cf3.js"]),"./chart/index.ts":()=>je(()=>import("./index.90d7e27b.js"),["assets/index.90d7e27b.js","assets/vendor.2f48f3fc.js","assets/vendor.266bc503.css","assets/lodash.5864dd39.js","assets/ant-design-vue.690beb7d.js","assets/ant-design-vue.0f4a9536.css","assets/node-forge.a6b0f3f3.js","assets/echarts.6d889a97.js","assets/prettier.da792cf3.js"])},ye={};for(const[e,t]of Object.entries(Ut)){const n=e.match(/\.\/(.*)\/index\.ts/);(n==null?void 0:n[1])&&(ye[n[1]]=t)}const zt=[],Ke=[];var cn=async e=>{const t=async n=>{const u=(await n()).default,{name:s,icon:o,components:c,order:d,dataConfig:r}=u,i=[];for(const[h,f]of Object.entries(c)){const b=(await f()).default;b.type=h,b.dataConfig=r||b.dataConfig,e.component(`cq-${h}`,b.component),i.push(b),Ke.push(b)}zt[d]={groupName:s,icon:o,list:i}};e.component("cq-group",$t);for(const n in ye)await t(ye[n])};const jt=e=>{const t=Ke.find(n=>n.type===e);if(t)return R(t)},_=$("board",{state:()=>({selected:[],data:[],refs:[],offset:{left:0,top:0}}),getters:{curCom(e){return e.selected.length>0?e.data[e.selected[0]]:void 0},curComs(e){return e.selected.map(t=>e.data[t])}},actions:{rawAppend(e){const t=[],n=[];Array.isArray(e)?e.forEach((a,u)=>{t.push(a),n.push(this.data.length+u)}):(t.push(e),n.push(this.data.length)),this.data.push(...t),this.selected=n},append({top:e=0,left:t=0,type:n=""}){const a=jt(n);if(!a)throw new Error("\u83B7\u53D6\u4E0D\u5230\u8BE5\u7EC4\u4EF6\u4FE1\u606F");const{style:u,data:s,propsData:o}=R(a),c=0,d=1,r=n,i=he(),h=v(v({top:e,left:t,rotate:c,opacity:d},ve.defaultComponentSize),u),f=a.name;this.rawAppend({id:i,component:r,label:f,propsData:o,style:h,data:s})},del(){this.selected.length>0&&(qe(this.data,this.selected),this.selected=[],O.success("\u5220\u9664\u6210\u529F\uFF01"))},cancelSelected(){this.selected=[]},setIndex(e){const t=typeof e=="number"?[e]:e,n=[],{data:a}=this;t.forEach(u=>{!a[u].locked&&a[u].style.display!=="none"&&n.push(u)}),this.selected=n},spliceSelected(e){this.selected.splice(this.selected.indexOf(e),1)},appendSelected(e){const{data:t}=this,n=typeof e=="number"?[e]:e,a=[];n.forEach(u=>{!t[u].locked&&t[u].style.display!=="none"&&a.push(u)}),this.selected.push(...a)},changeSelected(e){this.selected.includes(e)?this.spliceSelected(e):this.appendSelected(e)},setBoard(e){e?Object.assign(this,e):(this.data=[],this.selected=[]),re(()=>{const{handleAllEchartsResize:t}=yt();t(this)})},copy(){if(this.selected.length>0){const e=this.selected.map(t=>{const n=R(this.data[t]);return n.style.left+=10,n.style.top+=10,n});this.rawAppend(e)}},moveUp(e=!1){const{data:t,selected:n}=this,a=t.length;if(n.length!==0)if(n.length>1)O.error("\u591A\u9009\u65E0\u6CD5\u79FB\u52A8");else if(n[0]===a-1)O.error("\u5DF2\u7ECF\u662F\u6700\u9876\u5C42\uFF01");else{const u=e?a-1:n[0]+1;[t[n[0]],t[u]]=[t[u],t[n[0]]]}},moveDown(e=!1){const{data:t,selected:n}=this;if(n.length!==0)if(n.length>1)O.error("\u591A\u9009\u65E0\u6CD5\u79FB\u52A8");else if(n[0]===0)O.error("\u5DF2\u7ECF\u662F\u6700\u5E95\u5C42\uFF01");else{const a=e?0:n[0]-1;[t[n[0]],t[a]]=[t[a],t[n[0]]]}},calcSelectedByRect(e){this.cancelSelected();const t=[];this.data.forEach((n,a)=>{const{width:u,height:s,left:o,top:c}=n.style,d=Math.min(o,e.left),r=Math.min(c,e.top),i=Math.max(o+u,e.left+e.width),h=Math.max(c+s,e.top+e.height),f=i-d,F=h-r;f<u+e.width&&F<s+e.height&&t.push(a)}),this.setIndex(t)},group(){const{selected:e,data:t}=this,n=qe(t,e),a=n.reduce((h,f)=>{const{left:F,top:b,width:E,height:l}=f.style;return{leftX:Math.min(h.leftX,F),leftY:Math.min(h.leftY,b),rightX:Math.max(h.rightX,E+F),rightY:Math.max(h.rightY,l+b)}},{leftX:1/0,leftY:1/0,rightX:0,rightY:0}),{leftX:u,leftY:s,rightX:o,rightY:c}=a;n.forEach(h=>{h.style.top-=s,h.style.left-=u});const d=o-u,r=c-s,i={id:he(),component:"group",label:"\u6210\u7EC4",group:n,style:{top:s,left:u,width:d,height:r,rotate:0,opacity:1}};e.length=0,this.rawAppend(i)},cancelGroup(){const{selected:e,data:t}=this,n=t[e[0]];t.splice(e[0],1);const a=n.group;if(!a)return;const{left:u,top:s}=n.style,o=[];a.forEach(c=>{c.style.left+=u,c.style.top+=s,o.push(c)}),this.rawAppend(o)},toggleLocked(e){const{data:t,selected:n}=this;(typeof e=="number"?[e]:[...e]).forEach(u=>{const s=t[u],o=n.indexOf(u);s.locked=!s.locked,s.locked&&o>-1&&n.splice(o,1)})},hide(e){const{data:t,selected:n}=this;(typeof e=="number"?[e]:[...e]).forEach(u=>{t[u].style.display="none";const s=n.indexOf(u);s>-1&&n.splice(s,1)})},show(e){this.data[e].style.display="block"},selectAll(){const{data:e}=this;this.selected=e.map((t,n)=>n)},clearRefs(){this.refs.length=0},setOffset(e){this.offset=e},pushRef(e){this.refs.push(e)}}}),H=$("page",{state(){const e=w(v({_id:"",__v:0},ve.defaultPageSize),{title:"",description:"",backgroundColor:"",scale:100,gap:1,url:"",zoom:0,author:"",pageMode:0});return{config:e,cache:w(v({},e),{components:[]})}},actions:{updateCache(){const e=_();Object.assign(this.cache,this.config),this.cache.components=R(se(e.data))},async savePage(){const e=_(),t=pt();if(e.data.length===0){O.error("\u5C1A\u672A\u6DFB\u52A0\u4EFB\u4F55\u7EC4\u4EF6\uFF01");return}const n=R(se(e.data)),a=v({components:n},this.config),o=a,{_id:u}=o,s=ie(o,["_id"]);if(u)(await Rt(se(a))).code===0&&(O.success("\u4FDD\u5B58\u6210\u529F\uFF01"),this.updateCache());else{const c=await It(v({},s));c.code===0&&(O.success("\u521B\u5EFA\u6210\u529F\uFF01"),this.config._id=c.data._id,this.updateCache(),t.push(`/editor/${c.data._id}`))}},isModified(){const e=_(),t=w(v({},this.config),{components:se(e.data)});return JSON.stringify(t)!==JSON.stringify(this.cache)}}}),rn=$("snapshot",{state:()=>({data:[],index:-1}),actions:{undo(){if(this.index>-1){this.index--;const e=this.index===-1?void 0:R(this.data[this.index]);if(e){const{selected:t,page:n}=e,{components:a}=n;_().setBoard({selected:t,data:a})}}},redo(){if(this.index<this.data.length-1){this.index++;const e=_(),t=R(this.data[this.index]),{selected:n,page:a}=t,{components:u}=a;e.setBoard({selected:n,data:u})}},rawRecordSnapshot(e,t){this.data[++this.index]={page:e,selected:t},this.index<this.data.length-1&&(this.data=this.data.slice(0,this.index+1)),this.data.length>ve.maxSnapshot&&this.data.shift(),O.success("\u4FDD\u5B58\u6210\u529F\uFF01")},recordSnapshot(){const e=H(),t=_(),{data:n,selected:a}=t,u=R(n),s=w(v({},e.config),{components:u});this.rawRecordSnapshot(s,a)}}}),dn=$("theme",{state(){return{value:"light"}},actions:{async changeTheme(e){this.value=e,e==="dark"?(mt||await ft(),oe.set(z.IS_DARK,1)):oe.remove(z.IS_DARK),document.documentElement.setAttribute("data-theme",this.value)},async switchTheme(){const e=oe.get(z.IS_DARK);this.changeTheme(e?"light":"dark")}}}),Ae=$("panel",{state(){return{layer:!0,component:!0,config:!0,util:!0}},actions:{switchPanelShow(e){this[e]=!this[e]}}});var J;(function(e){e.BOARD="board",e.LAYER="layer"})(J||(J={}));const We=$("menu",{state(){return{board:{show:!1,style:{}},layer:{show:!1,style:{}}}},actions:{show(e,t,n){e.preventDefault();const{pageX:a,pageY:u}=e;n.selected.length!==0&&(this[t].show=!0,re(()=>{const{ref:s,container:o,style:c}=this[t];if(!s||!o)return;const d=10,{width:r,height:i}=s.getBoundingClientRect(),{width:h,height:f,left:F,top:b}=o.getBoundingClientRect();c.left=Math.min(a-F,h-r-d),c.top=Math.min(u-b,f-i-d)}))},hide(e){this[e].show=!1},hideAll(){Object.values(J).forEach(e=>{this.hide(e)})},setRefAndContainer(e,t,n){this[e].ref=t,this[e].container=n}}});function S(e,t=!1){const a=H().config.scale/100,u=t?e*a:e/a;return Math.floor(u)}const Ht=(e,t,n=".board")=>{const a=document.querySelector(n);if(!a)return;const u=a.getBoundingClientRect();return{top:S(t-u.top),left:S(e-u.left)}},oe={set(e,t,n=864e5){const a=typeof t=="string"?t:Oe.stringify(t);return localStorage.setItem(e,a),localStorage.setItem(`${e}__expires__`,Date.now()+n+""),t},get(e){const t=Date.now(),n=localStorage.getItem(`${e}__expires__`)||t+1;if(t>=n){this.remove(e);return}return localStorage.getItem(e)},remove(e){localStorage.removeItem(e),localStorage.removeItem(`${e}__expires__`)}},hn=e=>e.map(t=>w(v({},t),{dataIndex:t.dataIndex||t.key,align:"center",slots:{customRender:t.key}})),qe=(e,t)=>{const n=t.map(a=>e[a]);return n.forEach(a=>{const u=e.indexOf(a);e.splice(u,1)}),n},Ve=e=>{const{selected:t,data:n}=e;if(t.length<=1)return!0;let a=0;return t.forEach(u=>{if(!n[u])return;const{group:s}=n[u];(!s||s.length===0)&&a++}),a!==t.length},Ze=e=>{const{selected:t,data:n}=e;if(t.length!==1)return!0;const{group:a}=n[t[0]];return!(a==null?void 0:a.length)};export{jt as A,Lt as B,rn as C,ln as D,un as E,He as F,Mt as G,on as H,Ct as I,z as L,J as M,Ge as _,je as a,cn as b,hn as c,an as d,Ne as e,_ as f,sn as g,H as h,We as i,V as j,yt as k,oe as l,Jt as m,en as n,U as o,be as p,Qt as q,tn as r,bt as s,nn as t,dn as u,Tt as v,S as w,Ae as x,zt as y,At as z};
