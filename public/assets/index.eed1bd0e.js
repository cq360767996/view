var ze=Object.defineProperty,Se=Object.defineProperties;var Oe=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var se=(o,t,a)=>t in o?ze(o,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[t]=a,ue=(o,t)=>{for(var a in t||(t={}))oe.call(t,a)&&se(o,a,t[a]);if(M)for(var a of M(t))ne.call(t,a)&&se(o,a,t[a]);return o},ie=(o,t)=>Se(o,Oe(t));var re=(o,t)=>{var a={};for(var u in o)oe.call(o,u)&&t.indexOf(u)<0&&(a[u]=o[u]);if(o!=null&&M)for(var u of M(o))t.indexOf(u)<0&&ne.call(o,u)&&(a[u]=o[u]);return a};import{f as de,F as h,h as S,i as G,p as Ae,s as $e,B as Te,_ as Ne,u as ce,j as Re,k as pe,D as V,c as Pe,m as me,n as je,o as Ie,q as Me,r as Ve,t as Le,v as Ke,w as qe}from"./array.4626e544.js";import"./node-forge.5968f396.js";import{g as O,o as L,n as P,B as z,p as H,F as K,q as fe,E as Ge,i as _e,j as ve,r as ye,I as be,d as He,s as We,t as Je,k as Ce,b as Xe,f as Ye,S as Ze,D as he,M as ge,e as Qe}from"./ant-design-vue.83e8893e.js";import{d as $,cX as s,cY as F,dD as et,cZ as n,d5 as b,c_ as C,d7 as B,da as k,F as w,l,u as e,k as W,D as A,dE as tt,dg as J,db as j,O as at,P as X,q as T,o as Y,d6 as Ee,t as N,a1 as lt,dF as Fe,N as we,dq as ot,dr as nt,dG as st,dH as ut,dI as it,dJ as rt,dK as dt,dL as ct,dM as pt,dN as mt,dO as ft,dP as _t,dc as Z,df as Be,r as vt,cV as ke,dQ as De,d9 as Q,dz as yt,dR as bt,dS as Ct,dT as ht,dU as gt,dV as Et,dW as Ft,y as wt,dX as Bt,dY as kt,dZ as Dt,d_ as Ut,d$ as xt,e0 as zt,am as St}from"./vendor.c1777180.js";import"./echarts.2c7d4ddc.js";import{l as Ot}from"./lodash.52f79bb2.js";import{s as ee,p as te}from"./prettier.bc782120.js";import{E as ae,d as At,o as $t,a as Tt,j as Nt,b as Rt,c as Pt,e as jt,l as It}from"./codemirror.b2610263.js";import{c as Mt}from"./string.bb6fd376.js";const Vt={class:"form-item__extra"},I=$({props:{field:{type:Object,default:()=>({})},model:{type:Object,default:()=>({})}},setup(o){const t=u=>u.span?u.span:u.type===h.INPUT_NUMBER?10:16,a=(u,d)=>u.offset?u.offset:d>0?2:0;return(u,d)=>(s(),F(e(P),{label:o.field.label},et({default:n(()=>[l(e(L),null,{default:n(()=>[Array.isArray(o.field.item)?(s(!0),C(w,{key:0},B(o.field.item,(c,y)=>(s(),F(e(O),{key:c.model,span:c.span||10,offset:a(c,y)},{default:n(()=>[l(de,{field:c,model:o.model},null,8,["field","model"])]),_:2},1032,["span","offset"]))),128)):(s(),F(e(O),{key:1,span:t(o.field.item),offset:o.field.item.offset},{default:n(()=>[l(de,{field:o.field.item,model:o.model},null,8,["field","model"])]),_:1},8,["span","offset"]))]),_:1})]),_:2},[o.field.extra?{name:"extra",fn:n(()=>[b("div",Vt,[(s(!0),C(w,null,B(o.field.extra,c=>(s(),C("span",{key:c},k(c),1))),128))])])}:void 0]),1032,["label"]))}}),Lt={key:0,class:"preview__mask"},Kt={class:"preview__box"},qt={class:"preview__title"},Gt={class:"preview__container"},Ht=["z-index"],Wt=$({props:{modelValue:Boolean},emits:["update:modelValue"],setup(o,{emit:t}){const a=S(),u=G(),d=W(()=>{const{width:y,height:g,backgroundColor:r}=u.config;return{width:y,height:g,backgroundColor:r}}),c=()=>{t("update:modelValue",!1)};return(y,g)=>(s(),F(at,{to:"#modal"},[o.modelValue?(s(),C("div",Lt,[b("div",Kt,[b("div",qt,[A(k(e(u).config.title)+" ",1),l(e(tt),{class:"preview__close",onClick:c})]),b("div",Gt,[b("div",{style:J(e(Ae)(e(d)))},[(s(!0),C(w,null,B(e(a).data,(r,p)=>(s(),C("div",{key:r.id,class:"board-wrapper","z-index":p,style:J(e($e)(r.style))},[l(Te,{data:r,class:"board-component"},null,8,["data"])],12,Ht))),128))],4)])])])):j("",!0)]))}}),Jt=$({props:{viewer:{type:Object,default:()=>new ae},type:{type:String,default:()=>"json"},doc:{type:String,default:()=>""},readonly:{type:Boolean,default:()=>!1}},emits:["update:viewer"],setup(o,{emit:t}){const a=o,u=ce(),d={light:[At],dark:[$t,Tt]},c=X(),y={json:Nt,javascript:Rt},g=a.type==="json"?"json":"babel";return T(()=>{const r=ee.exports.format(a.doc,{parser:g,plugins:[te]}),p=y[a.type]||y.json,m=Pt.create({doc:r,extensions:[jt,It.of(p),ae.editable.of(!a.readonly),...d[u.value]]});a.viewer.setState(m)}),Y(()=>{!c.value||t("update:viewer",new ae({parent:c.value}))}),(r,p)=>(s(),C("div",{ref:(m,v)=>{v.cm=m,Ee(c)&&(c.value=m)},class:"code-mirror"},null,512))}});var q=Ne(Jt,[["__scopeId","data-v-2325f258"]]);const Xt={class:"animation-btn_group"},Yt=A(" \u6DFB\u52A0 "),Zt=A(" \u9884\u89C8 "),Qt={class:"animation-title"},ea={class:"animation-title__left"},ta={class:"animation-title__right"},aa={class:"animation-box"},la=["onMouseover","onClick"],oa=$({setup(o){const t=N(""),a=S(),u=[{label:"\u52A8\u753B",extra:["\u65F6\u957F","\u5EF6\u8FDF"],item:[{type:h.INPUT_NUMBER,model:"animationDuration",propsData:{min:0}},{type:h.INPUT_NUMBER,model:"animationDelay",propsData:{min:0}}]},{label:"\u5FAA\u73AF\u6B21\u6570",item:{type:h.INPUT_NUMBER,model:"animationIterationCount",propsData:{min:1}}}],{drawer:d,play:c,playAll:y,handleMouseover:g,handleMouseleave:r,getAnimationClass:p,addAnimation:m}=Re(a.curCom),v=D=>{var i,x;((i=a.curCom)==null?void 0:i.animations)&&((x=a.curCom)==null||x.animations.splice(D,1))};return(D,i)=>{var x,_;return s(),C(w,null,[b("div",Xt,[l(e(z),{type:"primary",onClick:i[0]||(i[0]=E=>e(d).show=!0)},{icon:n(()=>[l(e(lt))]),default:n(()=>[Yt]),_:1}),l(e(z),{type:"primary",onClick:i[1]||(i[1]=E=>e(y)(e(a).refs[e(a).selected[0]]))},{icon:n(()=>[l(e(Fe))]),default:n(()=>[Zt]),_:1})]),((_=(x=e(a).curCom)==null?void 0:x.animations)==null?void 0:_.length)?(s(),F(e(fe),{key:0,modelValue:t.value,"onUpdate:modelValue":i[2]||(i[2]=E=>t.value=E),class:"animation-wrapper",accordion:""},{default:n(()=>{var E;return[(s(!0),C(w,null,B((E=e(a).curCom)==null?void 0:E.animations,(f,U)=>(s(),F(e(H),{key:f.id},{header:n(()=>[b("div",Qt,[b("span",ea,k(f.label),1),b("div",ta,[l(e(z),{size:"small",type:"primary",onClick:we(R=>e(c)(U,e(a).refs[e(a).selected[0]]),["stop"])},{icon:n(()=>[l(e(Fe))]),_:2},1032,["onClick"]),l(e(z),{size:"small",type:"primary",onClick:we(R=>v(U),["stop"])},{icon:n(()=>[l(e(ot))]),_:2},1032,["onClick"])])])]),default:n(()=>[l(e(K),{"label-align":"right","label-col":{span:5,offset:2},"wrapper-col":{span:16,offset:1}},{default:n(()=>[(s(),C(w,null,B(u,R=>{var le;return l(e(I),{key:R.label,field:R,model:(le=e(a).curCom)==null?void 0:le.animations[U]},null,8,["field","model"])}),64))]),_:2},1024)]),_:2},1024))),128))]}),_:1},8,["modelValue"])):(s(),F(e(Ge),{key:1,description:"\u5C1A\u672A\u9009\u62E9\u4EFB\u4F55\u52A8\u753B"})),l(e(ye),{visible:e(d).show,"onUpdate:visible":i[5]||(i[5]=E=>e(d).show=E),placement:"right",width:400,closable:!1},{default:n(()=>[l(e(_e),{modelValue:e(d).selected,"onUpdate:modelValue":i[4]||(i[4]=E=>e(d).selected=E),size:"small"},{default:n(()=>[(s(!0),C(w,null,B(e(d).data,E=>(s(),F(e(ve),{key:E.title,label:E.title},{tab:n(()=>[A(k(E.title),1)]),default:n(()=>[b("ul",aa,[(s(!0),C(w,null,B(E.data,f=>(s(),C("li",{key:f.name,class:"animation-box__item",onMouseover:U=>e(g)(f.name),onMouseleave:i[3]||(i[3]=(...U)=>e(r)&&e(r)(...U)),onClick:U=>e(m)(f)},[b("div",{class:nt(e(p)(f.name))},null,2),A(" "+k(f.label),1)],40,la))),128))])]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["visible"])],64)}}}),na=$({setup(o){const t=S(),a=N(""),u=(r=!1)=>{const p=r?-45:45;t.curCom.style.rotate+=p},d=X(),c=[{label:"\u5C3A\u5BF8",extra:["\u5BBD\u5EA6","\u9AD8\u5EA6"],item:[{type:h.INPUT_NUMBER,model:"width"},{type:h.INPUT_NUMBER,model:"height"}]},{label:"\u4F4D\u7F6E",extra:["x\u8F74","y\u8F74"],item:[{type:h.INPUT_NUMBER,model:"left"},{type:h.INPUT_NUMBER,model:"top"}]},{label:"\u900F\u660E\u5EA6",item:[{type:h.SLIDER,model:"opacity",propsData:{min:0,max:1,step:.1}},{type:h.INPUT_NUMBER,model:"opacity",propsData:{min:0,max:1,step:.1}}]}],y=[{title:"\u8FB9\u6846&\u5706\u89D2",fields:[{label:"\u5706\u89D2",item:{type:h.INPUT_NUMBER,model:"borderRadius"}},{label:"\u8FB9\u6846",extra:["\u5927\u5C0F","\u989C\u8272"],item:[{type:h.INPUT_NUMBER,model:"borderWidth"},{type:h.COLOR_PICKER,model:"borderColor"}]},{label:"\u8FB9\u6846\u7EBF\u578B",item:{type:h.SELECT,model:"borderStyle",data:[{id:"none",label:"\u65E0\u8FB9\u6846"},{id:"dotted",label:"\u70B9\u72B6"},{id:"dashed",label:"\u865A\u7EBF"},{id:"solid",label:"\u5B9E\u7EBF"}]}}]},{title:"\u5B57\u4F53",fields:[{label:"\u5B57\u4F53",extra:["\u5927\u5C0F","\u7C97\u7EC6"],item:[{model:"fontSize",type:h.INPUT_NUMBER,default:14},{model:"fontWeight",type:h.INPUT_NUMBER,default:500,propsData:{step:100,min:100,max:900}}]},{label:"\u6587\u5B57",extra:["\u884C\u9AD8","\u95F4\u8DDD"],item:[{model:"lineHeight",type:h.INPUT_NUMBER,default:1,propsData:{step:.1}},{model:"letterSpacing",type:h.INPUT_NUMBER,default:0}]},{label:"\u6C34\u5E73\u5BF9\u9F50",item:{model:"textAlign",type:h.BTN_GROUP,data:[{icon:st,tip:"\u5C45\u5DE6",value:"left"},{icon:ut,tip:"\u5C45\u4E2D",value:"center"},{icon:it,tip:"\u5C45\u53F3",value:"right"}]}}]},{title:"\u989C\u8272",fields:[{label:"\u989C\u8272",extra:["\u5B57\u4F53\u989C\u8272","\u80CC\u666F\u8272"],item:[{model:"color",type:h.COLOR_PICKER},{model:"backgroundColor",type:h.COLOR_PICKER}]}]}],g=(r,p)=>{const m=v=>{v.default!==void 0&&p[v.model]===void 0&&(p[v.model]=v.default)};Array.isArray(r)?r.forEach(v=>m(v)):m(r)};return T(()=>{if(t.selected.length===1){const{style:r}=t.data[t.selected[0]];y.forEach(p=>{p.fields.forEach(m=>{const{item:v}=m;g(v,r)})})}}),T(()=>{if(!t.curCom)return;const{component:r,propsData:p}=t.curCom;if(d.value=pe(r),!d.value)return;const{attr:m}=d.value;t.selected.length===1&&m&&p&&m.forEach(v=>{v.fields.forEach(D=>{g(D.item,p)})})}),(r,p)=>(s(),F(e(K),{"label-align":"right","label-col":{span:5,offset:2},"wrapper-col":{span:16,offset:1}},{default:n(()=>[l(e(P),{label:"\u540D\u79F0"},{default:n(()=>[l(e(O),{span:"16"},{default:n(()=>[l(e(be),{value:e(t).curCom.label,"onUpdate:value":p[0]||(p[0]=m=>e(t).curCom.label=m),size:"small"},null,8,["value"])]),_:1})]),_:1}),(s(),C(w,null,B(c,m=>{var v;return l(I,{key:m.label,field:m,model:(v=e(t).curCom)==null?void 0:v.style},null,8,["field","model"])}),64)),l(e(P),{label:"\u65CB\u8F6C\u89D2\u5EA6"},{default:n(()=>[l(e(L),null,{default:n(()=>[l(e(O),{span:"10"},{default:n(()=>[l(e(He),{value:e(t).curCom.style.rotate,"onUpdate:value":p[1]||(p[1]=m=>e(t).curCom.style.rotate=m),precision:0,size:"small"},null,8,["value"])]),_:1}),l(e(O),{span:"3",offset:"2"},{default:n(()=>[l(e(z),{size:"small",onClick:p[2]||(p[2]=m=>u(!0))},{icon:n(()=>[l(e(rt))]),_:1})]),_:1}),l(e(O),{span:"3"},{default:n(()=>[l(e(z),{size:"small",onClick:p[3]||(p[3]=m=>u())},{icon:n(()=>[l(e(dt))]),_:1})]),_:1})]),_:1})]),_:1}),l(e(fe),{activeKey:a.value,"onUpdate:activeKey":p[4]||(p[4]=m=>a.value=m),"expand-icon-position":"right",size:"small"},{default:n(()=>{var m;return[(s(),C(w,null,B(y,v=>l(e(H),{key:v.title,title:v.title,header:v.title},{default:n(()=>[(s(!0),C(w,null,B(v.fields,D=>{var i;return s(),F(I,{key:D.label,field:D,model:(i=e(t).curCom)==null?void 0:i.style},null,8,["field","model"])}),128))]),_:2},1032,["title","header"])),64)),(s(!0),C(w,null,B((m=e(d))==null?void 0:m.attr,v=>(s(),F(e(H),{key:v.title,title:v.title,header:v.title},{default:n(()=>[(s(!0),C(w,null,B(v.fields,D=>{var i;return s(),F(I,{key:D.label,field:D,model:(i=e(t).curCom)==null?void 0:i.propsData},null,8,["field","model"])}),128))]),_:2},1032,["title","header"]))),128))]}),_:1},8,["activeKey"])]),_:1}))}}),sa={class:"page-config"},ua=b("header",{class:"page-config__header"},"\u9875\u9762\u8BBE\u7F6E",-1),ia={class:"page-config__wrapper"},ra=$({setup(o){const t=G(),a=[{label:"\u9875\u9762\u6807\u9898",item:{type:h.INPUT,model:"title",span:22}},{label:"\u9875\u9762\u63CF\u8FF0",item:{type:h.TEXTAREA,model:"description",span:22}},{label:"\u5C4F\u5E55\u5C3A\u5BF8",extra:["\u5BBD\u5EA6","\u9AD8\u5EA6"],item:[{type:h.INPUT_NUMBER,model:"width"},{type:h.INPUT_NUMBER,model:"height"}]},{label:"\u80CC\u666F\u989C\u8272",item:{type:h.COLOR_PICKER,model:"backgroundColor"}},{label:"\u80CC\u666F\u56FE\u7247",item:{type:h.INPUT,model:"url"}},{label:"\u7F29\u653E\u65B9\u5F0F",item:{type:h.BTN_GROUP,model:"zoom",span:22,data:[{icon:ct,tip:"\u5168\u5C4F\u94FA\u6EE1",value:0},{icon:pt,tip:"\u7B49\u6BD4\u7F29\u653E\u5BBD\u5EA6\u94FA\u6EE1",value:1},{icon:mt,tip:"\u7B49\u6BD4\u7F29\u653E\u9AD8\u5EA6\u94FA\u6EE1",value:2},{icon:ft,tip:"\u7B49\u6BD4\u7F29\u653E\u9AD8\u5EA6\u94FA\u6EE1\uFF08\u53EF\u6EDA\u52A8\uFF09",value:3},{icon:_t,tip:"\u4E0D\u7F29\u653E",value:4}]}},{label:"\u6805\u683C\u95F4\u8DDD",item:{type:h.INPUT_NUMBER,model:"gap"}}];return(u,d)=>(s(),C("div",sa,[ua,b("section",ia,[l(e(K),{model:e(t).config,"hide-required-mark":"","label-align":"right","label-col":{span:5,offset:2},"wrapper-col":{span:16,offset:1}},{default:n(()=>[(s(),C(w,null,B(a,c=>l(e(I),{key:c.label,field:c,model:e(t).config},null,8,["field","model"])),64))]),_:1},8,["model"])])]))}});function da(o){const t=S(),a=Z({openFilter:!1,show:!1,options:Object.keys(V).map(y=>{const g=y;return{value:g,label:V[g]}})});function u(){var g;if(!a.viewer)return;const y=a.viewer.state.doc.toJSON();o.value=y.reduce((r,p)=>r+p,""),((g=t.curCom)==null?void 0:g.data)&&(t.curCom.data.static=Be.parse(o.value))}function d(y){if(y&&Fa(y))return new Promise((g,r)=>{fetch(y).then(p=>p.json()).then(p=>{o.value=ee.exports.format(JSON.stringify(p),{parser:"json5",plugins:[te]}),g()}).catch(()=>{r(),o.value=ee.exports.format('{code: 1, msg: "\u63A5\u53E3\u8BF7\u6C42\u9519\u8BEF"}',{parser:"json5",plugins:[te]})})})}async function c(y=!1){var i;if(!((i=t.curCom)==null?void 0:i.data))return;const{url:g,type:r,static:p,filter:m}=t.curCom.data;await{url:d,static:y?()=>o.value=Be.stringify(p):u}[r](g),m&&(o.value=Mt(m,o.value))}return Y(()=>{T(()=>{c(!0)})}),{drawer:a,refreshData:u,resolveData:c}}function ca(o){const t=S(),a=Z({show:!1,doc:`function filter(data) {
    return data;
  }`});return{modal:a,handleFilterChange:d=>{var y;const c=(y=t.curCom)==null?void 0:y.data;!c||!a.viewer||(d?(c.filter=a.viewer.state.doc.sliceString(0),o.openFilter=!!t.curCom.data.filter,a.show=!1):delete c.filter)}}}function pa(o,t){const a=S(),u=vt([{actived:!0,text:V[a.curCom.data.type],btnText:"\u8BBE\u7F6E\u6570\u636E\u6E90",event:()=>{o.show=!0,o.openFilter=!!a.curCom.data.filter}},{actived:!!a.curCom.data.filter,text:"\u6570\u636E\u8FC7\u6EE4\u5668",btnText:"\u6DFB\u52A0\u8FC7\u6EE4\u5668",event:()=>{t.show=!0}},{actived:!0,text:"\u6570\u636E\u54CD\u5E94\u7ED3\u679C\uFF08\u53EA\u8BFB\uFF09",event:()=>{}}]);return T(()=>{if(!a.curCom)return;const{data:d}=a.curCom;d&&(u[0].text=V[d.type],u[1].actived=!!d.filter)}),{timeline:u}}function ma(){const o=S(),t=Z({data:[],columns:Pe([{title:"\u5B57\u6BB5",key:"key"},{title:"\u6620\u5C04",key:"mapping"},{title:"\u72B6\u6001",key:"status"}])});return T(()=>{var u;if(!o.curCom)return;const{data:a}=o.curCom;((u=a==null?void 0:a.static)==null?void 0:u[0])&&(t.data=Object.keys(a.static[0]).map(d=>({key:d,mapping:"-",status:"\u5339\u914D\u6210\u529F"})))}),{table:t}}var fa={cn:{dataSource:"\u6570\u636E\u6E90",configDataSource:"\u8BBE\u7F6E@:dataSource",dataSourceType:"@:dataSource\u7C7B\u578B",updateData:"\u66F4\u65B0\u6570\u636E",openFilter:"\u5F00\u542F@:filter",configFilter:"\u8BBE\u7F6E@:filter",uri:"\u63A5\u53E3\u5730\u5740",response:"\u54CD\u5E94\u7ED3\u679C",filter:"\u8FC7\u6EE4\u5668"},en:{dataSource:"Data Source",configDataSource:"Config @:dataSource",dataSourceType:"@:dataSource Type",updateData:"Update Data",openFilter:"Open @:filter",configFilter:"Config :filter",uri:"URI",response:"Response",filter:"Filter"}};const _a={class:"data-panel"},va={class:"timeline-wrapper"},ya={class:"timeline-wrapper__item"},ba=$({setup(o){const t=S(),a=X(),u=N(),{t:d}=ke({useScope:"local",messages:fa}),{drawer:c,refreshData:y,resolveData:g}=da(u),{modal:r,handleFilterChange:p}=ca(c),{timeline:m}=pa(c,r),{table:v}=ma();return(D,i)=>{var x;return s(),C("div",_a,[b("div",va,[l(e(Je),null,{default:n(()=>[(s(!0),C(w,null,B(e(m),_=>(s(),F(e(We),{key:_.text,color:_.actived?"blue":"gray"},{default:n(()=>[b("div",ya,[b("span",null,k(_.text),1),_.btnText?(s(),F(e(z),{key:0,type:"primary",size:"small",onClick:_.event},{default:n(()=>[A(k(_.btnText),1)]),_:2},1032,["onClick"])):(s(),F(e(De),{key:1,onClick:_.event},null,8,["onClick"]))])]),_:2},1032,["color"]))),128))]),_:1})]),l(e(q),{viewer:e(a),"onUpdate:viewer":i[0]||(i[0]=_=>Ee(a)?a.value=_:null),doc:u.value,class:"code-box",readonly:""},null,8,["viewer","doc"]),l(e(Ce),{"data-source":e(v).data,columns:e(v).columns,pagination:!1},null,8,["data-source","columns"]),((x=e(t).curCom)==null?void 0:x.data)?(s(),F(e(ye),{key:0,visible:e(c).show,"onUpdate:visible":i[9]||(i[9]=_=>e(c).show=_),placement:"right",title:e(d)("configDataSource"),width:400,onClose:e(y)},{default:n(()=>[l(e(K),{"label-align":"right","label-col":{span:6},"wrapper-col":{span:17,offset:1}},{default:n(()=>{var _,E;return[l(e(P),{label:e(d)("dataSourceType")},{default:n(()=>[l(e(L),{justify:"space-between"},{default:n(()=>[l(e(O),null,{default:n(()=>[l(e(Xe),{value:e(t).curCom.data.type,"onUpdate:value":i[1]||(i[1]=f=>e(t).curCom.data.type=f),size:"small"},{default:n(()=>[(s(!0),C(w,null,B(e(c).options,f=>(s(),F(e(Ye),{key:f.value,value:f.value},{default:n(()=>[A(k(f.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),l(e(O),{offset:"2"},{default:n(()=>[l(e(z),{type:"primary",size:"small",onClick:i[2]||(i[2]=f=>e(g)())},{default:n(()=>[A(k(e(d)("updateData")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["label"]),l(e(P),{label:e(d)("openFilter")},{default:n(()=>[l(e(L),{justify:"space-between"},{default:n(()=>[l(e(O),null,{default:n(()=>[l(e(Ze),{checked:e(c).openFilter,"onUpdate:checked":i[3]||(i[3]=f=>e(c).openFilter=f),onChange:e(p)},null,8,["checked","onChange"])]),_:1}),l(e(O),{offset:"2"},{default:n(()=>[l(e(z),{type:"primary",size:"small",onClick:i[4]||(i[4]=f=>e(r).show=!0)},{default:n(()=>[A(k(e(d)("configFilter")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["label"]),((_=e(t).curCom)==null?void 0:_.data.type)==="url"?(s(),F(e(P),{key:0,label:e(d)("uri")},{default:n(()=>[l(e(be),{value:e(t).curCom.data.url,"onUpdate:value":i[5]||(i[5]=f=>e(t).curCom.data.url=f),size:"small"},null,8,["value"])]),_:1},8,["label"])):j("",!0),((E=e(t).curCom)==null?void 0:E.data.type)==="static"?(s(),F(e(q),{key:1,viewer:e(c).viewer,"onUpdate:viewer":i[6]||(i[6]=f=>e(c).viewer=f),doc:u.value},null,8,["viewer","doc"])):j("",!0)]}),_:1}),l(e(he)),l(e(Ce),{"data-source":e(v).data,columns:e(v).columns,pagination:!1},null,8,["data-source","columns"]),l(e(he),{orientation:"right"},{default:n(()=>[A(k(e(d)("response"))+" ",1),l(e(De),{onClick:i[7]||(i[7]=_=>e(g)())})]),_:1}),l(e(q),{viewer:e(c).readonlyViewer,"onUpdate:viewer":i[8]||(i[8]=_=>e(c).readonlyViewer=_),doc:u.value,readonly:""},null,8,["viewer","doc"])]),_:1},8,["visible","title","onClose"])):j("",!0),l(e(ge),{visible:e(r).show,"onUpdate:visible":i[11]||(i[11]=_=>e(r).show=_),title:e(d)("filter"),"z-index":1001,onOk:i[12]||(i[12]=_=>e(p)(!0))},{default:n(()=>[l(e(q),{viewer:e(r).viewer,"onUpdate:viewer":i[10]||(i[10]=_=>e(r).viewer=_),doc:e(r).doc,type:"javascript"},null,8,["viewer","doc"])]),_:1},8,["visible","title"])])}}}),Ca={class:"right-panel__title"},ha={class:"right-panel__subtitle"},ga={key:1,class:"right-panel__title"},Ea=$({setup(o){var g;const t=S(),a=me(),u=N(),d=N(),c=N((g=d.value)==null?void 0:g[0].title),y=W(()=>a.config?"332px":"0");return T(()=>{if(!t.curCom)return;const{component:r}=t.curCom;u.value=pe(r)}),T(()=>{if(!u.value)return;const r=[{title:"\u914D\u7F6E",component:na},{title:"\u6570\u636E",component:ba},{title:"\u52A8\u753B",component:oa}];u.value.dataConfig||r.splice(1,1),d.value=r}),(r,p)=>(s(),C("section",{class:"right-panel",style:J({width:e(y)})},[e(t).curCom?(s(),F(e(_e),{key:0,modelValue:c.value,"onUpdate:modelValue":p[0]||(p[0]=m=>c.value=m),type:"card",size:"small"},{default:n(()=>[(s(!0),C(w,null,B(d.value,m=>(s(),F(e(ve),{key:m.title},{tab:n(()=>[b("span",null,k(m.title),1)]),default:n(()=>[u.value?(s(),C(w,{key:0},[b("h2",Ca,k(u.value.name),1),b("h3",ha,"v"+k(u.value.version)+" | "+k(u.value.name),1)],64)):(s(),C("h2",ga,"\u7EC4\u5BB9\u5668")),(s(),F(Q(m.component)))]),_:2},1024))),128))]),_:1},8,["modelValue"])):e(a).config?(s(),F(e(ra),{key:1})):j("",!0)],4))}}),Fa=o=>/[a-zA-z]+:\/\/[^\s]*/.test(o);function Ue(o){o.__i18n=o.__i18n||[],o.__i18n.push({locale:"",resource:{cn:{backup:t=>{const{normalize:a}=t;return a(["\u7EC4\u4EF6\u5220\u9664\u5907\u4EFD"])},snapshot:t=>{const{normalize:a}=t;return a(["\u751F\u6210\u5FEB\u7167"])},save:t=>{const{normalize:a}=t;return a(["\u4FDD\u5B58"])},publish:t=>{const{normalize:a}=t;return a(["\u53D1\u5E03"])},preview:t=>{const{normalize:a}=t;return a(["\u9884\u89C8"])},theme:t=>{const{normalize:a}=t;return a(["\u6362\u80A4"])},warining:t=>{const{normalize:a}=t;return a(["\u8B66\u544A"])},tip:t=>{const{normalize:a}=t;return a(["\u7CFB\u7EDF\u53EF\u80FD\u4E0D\u4F1A\u4FDD\u5B58\u60A8\u6240\u505A\u7684\u66F4\u6539\uFF0C\u662F\u5426\u79BB\u5F00\uFF1F"])}},en:{backup:t=>{const{normalize:a}=t;return a(["Component Backup"])},snapshot:t=>{const{normalize:a}=t;return a(["Generate Snapshot"])},save:t=>{const{normalize:a}=t;return a(["Save"])},publish:t=>{const{normalize:a}=t;return a(["Publish"])},preview:t=>{const{normalize:a}=t;return a(["Preview"])},theme:t=>{const{normalize:a}=t;return a(["Theme"])},warining:t=>{const{normalize:a}=t;return a(["Warining"])},tip:t=>{const{normalize:a}=t;return a(["SomeThing has changed. Sure to Leave?"])}}}})}const wa={class:"header"},Ba={class:"header__wrapper"},ka={class:"header__panel-box"},Da={class:"header__publish"},Ua={class:"header__title"},xa={class:"main-container"},za={class:"mid-panel"},Sa=b("header",{class:"mid-panel__toolbar"},null,-1),Oa={class:"mid-panel__wrapper"},Aa={class:"canvas-main"},xe=$({props:{id:{type:String,default:()=>""}},setup(o){const t=o,a=je(),u=S(),d=G(),c=yt(),y=ce(),g=me(),{t:r}=ke({useScope:"local"}),p=N(!1);let m=!1;const v=[{key:"layer",icon:Dt},{key:"component",icon:Ut},{key:"config",icon:xt},{key:"util",icon:zt}],D=W(()=>v.map(_=>ie(ue({},_),{checked:g[_.key]}))),i=[{name:r("backup"),icon:bt,event:()=>null},{name:r("snapshot"),icon:Ct,event:()=>a.recordSnapshot()},{name:r("save"),icon:ht,event:()=>d.savePage()},{name:r("publish"),icon:gt,event:()=>{t.id&&window.open(`/share.html#/pc/${t.id}`)}},{name:r("preview"),icon:Et,event:()=>{p.value=!0}},{name:r("theme"),icon:Ft,event:()=>y.switchTheme()}],x=_=>{d.isModified()&&(_.returnValue=!1)};return Y(async()=>{if(Ie("contextmenu",R=>R.preventDefault()),window.addEventListener("beforeunload",x),!t.id)return;const _=await Me(t.id);if(_.code!==0)return;const U=_.data,{components:E}=U,f=re(U,["components"]);Object.assign(d.config,f),u.setBoard({data:Ot(E),selected:[]}),d.updateCache()}),wt(()=>{window.removeEventListener("beforeunload",x)}),Bt((_,E)=>{const f=d.isModified();if(!m&&f)return ge.confirm({title:()=>r("warning"),content:()=>r("tip"),icon:()=>l(St),onOk(){m=!0,c.push(_)},onCancel(){m=!1,c.push(E)}}),!1}),(_,E)=>(s(),C(w,null,[b("header",wa,[b("img",{width:"40",height:"40",src:Ve,onClick:E[0]||(E[0]=f=>_.$router.push("/"))}),b("div",Ba,[b("div",ka,[(s(!0),C(w,null,B(e(D),f=>(s(),F(e(z),{key:f.key,class:"header__button",size:"small",type:f.checked?"primary":"default",onClick:U=>e(g).switchPanelShow(f.key)},{icon:n(()=>[(s(),F(Q(f.icon)))]),_:2},1032,["type","onClick"]))),128))]),b("div",Da,[(s(),C(w,null,B(i,f=>l(e(Qe),{key:f.name,title:f.name,placement:"bottom"},{default:n(()=>[l(e(z),{class:"header__button",size:"small",onClick:U=>f.event()},{icon:n(()=>[(s(),F(Q(f.icon)))]),_:2},1032,["onClick"])]),_:2},1032,["title"])),64))])]),b("div",Ua,[l(e(kt)),b("span",null,k(e(d).config.title),1)])]),b("main",xa,[l(e(Le)),l(e(Ke)),b("section",za,[Sa,b("div",Oa,[b("section",Aa,[l(e(qe))])])]),l(e(Ea))]),l(e(Wt),{modelValue:p.value,"onUpdate:modelValue":E[1]||(E[1]=f=>p.value=f)},null,8,["modelValue"])],64))}});typeof Ue=="function"&&Ue(xe);var Ka=xe;export{Ka as default};
