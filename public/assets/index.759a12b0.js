import{_ as W}from"./logo.b4054013.js";import{I as X,l as S,L as A,u as Y,_ as G}from"./array.625a8c83.js";import{e as L}from"./string.b5d2a9f2.js";import{t as D}from"./promise.aa1a7cc9.js";import{e0 as U,e1 as J,d as V,db as Q,dc as ee,e2 as se,cW as E,v as I,h as oe,r as M,cY as d,c$ as N,dh as p,k as a,c_ as t,$ as y,dg as m,u as e,dV as ae,cZ as w,di as te,dj as C,F as j,cX as re,d7 as le,d6 as ue,e3 as ne,e4 as de,e5 as ie,e6 as ce}from"./vendor.03390643.js";import{F as O,B as pe,u as R,v as _,A as me,w as we,a as x,I as $,M as ve,m as B,L as fe,x as ge,y as ye,z as _e}from"./ant-design-vue.b8238920.js";import"./main.e214ebdf.js";import"./lodash.53dfd457.js";import"./node-forge.5a37fa97.js";import"./echarts.e9de6ed0.js";import"./prettier.20b7139b.js";const ke={cn:{exit:"\u9000\u51FA\u767B\u5F55",password:"\u5BC6\u7801",back:"\u8FD4\u56DE\u7BA1\u7406\u9875",dialog:{modify:"\u4FEE\u6539@:password",old:"\u539F@:password",new:"\u65B0@:password",confirm:"\u786E\u8BA4@:password"},validator:{empty:"@:password\u4E0D\u80FD\u4E3A\u7A7A\u3002",length:"@:password\u9700\u4EE5\u5B57\u6BCD\u5F00\u5934\uFF0C\u957F\u5EA6\u57286~18\u4E4B\u95F4\u3002",consistent:"\u4E24\u6B21\u8F93\u5165\u4E0D\u4E00\u81F4\u3002"},message:{success:{edit:"\u4FEE\u6539\u6210\u529F",logout:"\u5DF2@:exit"}}},en:{exit:"Exit Login",password:"Password",back:"Back",dialog:{modify:"Modify @:password",old:"Old",new:"New",confirm:"Confirm"},validator:{empty:"@:password is empty.",length:"@:password should start with alphabet, length should be in 6 to 18.",consistent:"Passwords are inconsistent."},message:{success:{edit:"Success",exit:"@:exit Success"}}}},Pe={cn:{page:"\u9875\u9762\u7BA1\u7406",masterplate:"\u6A21\u7248\u7BA1\u7406"},en:{page:"Page Manage",masterplate:"Masterplate Manage"}},Fe="user",be=i=>X(`${Fe}/changePassword`,i),he=[{key:"page",icon:U},{key:"masterplate",icon:J}];const Ce={class:"header-right"},xe={class:"exit-dropdown"},$e={class:"ml-5px"},Be=V({setup(i){const v=S.get(A.USER_INFO),n=v?Q.parse(v):{},k=ee(),P=se(),u=Y(),{locale:F}=E({useScope:"global"}),{t:o}=E({useScope:"local",messages:ke}),f=I(!1),K=oe("switchLocale"),l=M({password:"",newPassword:"",confirmPassword:""}),b=async(c,s)=>s?/^[a-zA-Z]\w{5,17}$/.test(s)?Promise.resolve():Promise.reject(o("validator.length")):Promise.reject(o("validator.empty")),T=M({password:[{required:!0,validator:b,trigger:"blur"}],newPassword:[{required:!0,validator:b,trigger:"blur"}],confirmPassword:[{required:!0,validator:async(c,s)=>{const[r]=await D(b(c,s));return r?Promise.reject(r):s!==l.newPassword?Promise.reject(o("validator.consistent")):Promise.resolve()},trigger:"blur"}]}),{resetFields:q,validate:z,validateInfos:h}=O.useForm(l,T),Z=async()=>{const[c]=await D(z());if(c)return;const s=L(l.password),r=L(l.newPassword),g=await be({password:s,newPassword:r});g.code===0?(f.value=!1,B.success(o("message.success.edit"))):B.error(g.msg)},H=()=>{S.remove(A.AUTHORIZATION),k.push(`/login?redirect=${P.path}`),B.success(o("message.success.logout"))};return(c,s)=>(d(),N(j,null,[p("div",Ce,[a(e(pe),{size:"small",onClick:s[0]||(s[0]=r=>{var g;return(g=e(K))==null?void 0:g()})},{default:t(()=>[y(m(e(F)),1)]),_:1}),a(e(ae),{class:"theme-change",onClick:s[1]||(s[1]=r=>e(u).switchTheme())}),a(e(we),null,{overlay:t(()=>[a(e(R),null,{default:t(()=>[a(e(_),{key:"0",onClick:s[2]||(s[2]=r=>f.value=!0)},{default:t(()=>[y(m(e(o)("dialog.modify")),1)]),_:1}),c.$route.path.includes("editor")?(d(),w(e(_),{key:"1",onClick:s[3]||(s[3]=r=>c.$router.push("/"))},{default:t(()=>[y(m(e(o)("back")),1)]),_:1})):te("",!0),a(e(_),{key:"2",onClick:H},{default:t(()=>[y(m(e(o)("exit")),1)]),_:1})]),_:1})]),default:t(()=>[p("div",xe,[a(e(me),null,{icon:t(()=>[a(e(U))]),_:1}),p("span",$e,m(e(n).name),1)])]),_:1})]),a(e(ve),{visible:f.value,"onUpdate:visible":s[7]||(s[7]=r=>f.value=r),title:e(o)("dialog.modify"),"after-close":e(q),onOk:Z},{default:t(()=>[a(e(O),{model:e(l),"label-col":{span:4},"wrapper-col":{span:16}},{default:t(()=>[a(e(x),C({label:e(o)("dialog.old")},e(h).password),{default:t(()=>[a(e($),{value:e(l).password,"onUpdate:value":s[4]||(s[4]=r=>e(l).password=r),type:"password"},null,8,["value"])]),_:1},16,["label"]),a(e(x),C({label:e(o)("dialog.new")},e(h).newPassword),{default:t(()=>[a(e($),{value:e(l).newPassword,"onUpdate:value":s[5]||(s[5]=r=>e(l).newPassword=r),type:"password"},null,8,["value"])]),_:1},16,["label"]),a(e(x),C({label:e(o)("dialog.confirm")},e(h).confirmPassword),{default:t(()=>[a(e($),{value:e(l).confirmPassword,"onUpdate:value":s[6]||(s[6]=r=>e(l).confirmPassword=r),type:"password"},null,8,["value"])]),_:1},16,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title","after-close"])],64))}});const Ee=i=>(ie("data-v-16a37e06"),i=i(),ce(),i),Ie=Ee(()=>p("div",{class:"logo"},[p("img",{width:"40",height:"40",src:W})],-1)),Se={class:"main"},Ae=V({setup(i){const v=I(["page"]),n=I(!1),{t:k}=E({useScope:"local",messages:Pe});return(P,u)=>{const F=re("RouterView");return d(),w(e(fe),{class:"flex h-full"},{default:t(()=>[a(e(ge),{collapsed:n.value,"onUpdate:collapsed":u[1]||(u[1]=o=>n.value=o),trigger:null,collapsible:""},{default:t(()=>[Ie,a(e(R),{selectedKeys:v.value,"onUpdate:selectedKeys":u[0]||(u[0]=o=>v.value=o),theme:"dark",mode:"inline"},{default:t(()=>[(d(!0),N(j,null,le(e(he),o=>(d(),w(e(_),{key:o.key,onClick:f=>P.$router.push({name:o.key})},{default:t(()=>[(d(),w(ue(o.icon))),p("span",null,m(e(k)(o.key)),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["selectedKeys"])]),_:1},8,["collapsed"]),p("div",Se,[a(e(ye),{class:"layout-header"},{default:t(()=>[n.value?(d(),w(e(ne),{key:0,class:"trigger",onClick:u[2]||(u[2]=o=>n.value=!n.value)})):(d(),w(e(de),{key:1,class:"trigger",onClick:u[3]||(u[3]=o=>n.value=!n.value)})),a(Be)]),_:1}),a(e(_e),{class:"layout-content"},{default:t(()=>[a(F)]),_:1})])]),_:1})}}});var ze=G(Ae,[["__scopeId","data-v-16a37e06"]]);export{ze as default};
