var Qe=Object.defineProperty,et=Object.defineProperties;var tt=Object.getOwnPropertyDescriptors;var ne=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable;var ke=(e,t,n)=>t in e?Qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b=(e,t)=>{for(var n in t||(t={}))Ae.call(t,n)&&ke(e,n,t[n]);if(ne)for(var n of ne(t))De.call(t,n)&&ke(e,n,t[n]);return e},S=(e,t)=>et(e,tt(t));var re=(e,t)=>{var n={};for(var s in e)Ae.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&ne)for(var s of ne(e))t.indexOf(s)<0&&De.call(e,s)&&(n[s]=e[s]);return n};import{m as x,T as Be,E as nt}from"./ant-design-vue.2145dcdb.js";import{r as j,s as se,t as ue,o as q,x as de,y as Fe,n as he,w as st,d2 as Y,d3 as Se,d4 as ot,d5 as xe,$ as oe,d6 as at,d7 as it,d8 as lt,d as ae,j as pe,cV as L,cW as fe,d9 as Re,da as Oe,cT as Pe,db as Ie,dc as Le,dd as Te,de as Me,df as $e,dg as Xe,dh as ge,a6 as me,di as ct,dj as rt,cY as V,dk as Ye,F as ye,dl as Ge,u as ie,O as je,dm as ut,dn as dt,k as g,dp as H,dq as ht,dr as He,ad as pt,Z as ft}from"./vendor.04153819.js";import{k as ve,l as T}from"./lodash.f14311af.js";import"./node-forge.38760642.js";import{g as gt}from"./echarts.dcc6399b.js";import"./prettier.97963628.js";const mt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}};mt();const U=(e,t,n)=>{document.addEventListener(e,t,n)},Z=(e,t,n)=>{document.removeEventListener(e,t,n)},_e=e=>{const t=["width","height","top","left","bottom","right","fontSize","borderWidth","borderRadius"],n={};for(const[s,o]of Object.entries(e))if(!!o){if(s==="rotate"){n.transform=`rotate(${o}deg)`;continue}if(s==="scale"){n.transform=`scale(${o/100})`;continue}n[s]=t.includes(s)?o+"px":o}return n},yt=(e,t=!0)=>{const r=e,{width:n,height:s,left:o,top:a}=r,i=re(r,["width","height","left","top"]),c=t?{width:n,height:s,left:o,top:a}:b({},i);return _e(c)};var we={maxSnapshot:20,defaultComponentSize:{width:100,height:100},defaultPageSize:{width:1920,height:1080}};const Jt=["url","static"];var Ue;(function(e){e.RADIO="radio",e.CHECKBOX="checkbox",e.INPUT="input",e.INPUT_NUMBER="input-number",e.SELECT="select",e.SWITCH="switch",e.SLIDER="slider",e.COLOR_PICKER="color-picker",e.BTN_GROUP="btn-group",e.TEXTAREA="textarea",e.CUSTOM="custom"})(Ue||(Ue={}));var z;(function(e){e.USER_INFO="user-info",e.AUTHORIZATION="authorization",e.IS_DARK="is-dark"})(z||(z={}));var k;(function(e){e.X="x",e.Y="y"})(k||(k={}));const Qt=()=>{const e=B(),t=j({show:!1,style:{width:0,height:0,top:0,left:0}});return{selectMask:t,handleMousedown:s=>{if(s.buttons===1){t.show=!0;const{pageX:o,pageY:a}=s,i=Ft(o,a);if(!i)return;t.style=S(b(b({},t.style),i),{width:0,height:0});const c=d=>{const{pageX:h,pageY:u}=d,f=M(h-o),m=M(u-a);f<0&&(t.style.left=i.left+f),m<0&&(t.style.top=i.top+m),t.style.width=Math.abs(f),t.style.height=Math.abs(m),e.calcSelectedByRect(t.style)},r=d=>{d.stopPropagation(),Z("mousemove",c),Z("mouseup",r),t.show=!1,d.clientX==o&&d.clientY==a&&e.cancelSelected()};U("mousemove",c),U("mouseup",r)}}}},vt=()=>{const e=n=>{const o=B().refs[n];if(o){const a=gt(o);a==null||a.resize()}};return{handleEchartsResize:e,handleAllEchartsResize:n=>{for(let s=0,o=n.data.length;s<o;s++)e(s)}}},en=(e,t,n)=>{const s=se(),o=j({width:0,height:0,top:0,left:0}),a=ue(!0),i=K(),c=Ce(),r=()=>{if(!e.value||!t.value||!s.value)return;const{width:v,height:y}=e.value.getBoundingClientRect(),{width:E,height:A}=t.value.getBoundingClientRect(),{width:C,height:l}=s.value.getBoundingClientRect(),p=E/v,_=A/y;o.width=Math.min(p*C,C),o.height=Math.min(_*l,l),n.value++},d=v=>{if(v.buttons!==1||!s.value)return;const y=v.target;let E=v.clientX,A=v.clientY,{left:C,top:l}=o;const{width:p,height:_}=s.value.getBoundingClientRect(),{width:G,height:W}=y.getBoundingClientRect(),$=p-G,R=_-W,O=F=>{if(F.stopPropagation(),!t.value||!e.value)return;const{clientX:w,clientY:X}=F,I=w-E,ce=X-A;let ee=0,te=0;I<0&&o.left<=0?(E=w,C=0,ee=0):I>=0&&o.left>=$?(E=w,C=$,ee=$):ee=C+I,ce<0&&o.top<=0?(A=X,l=0,te=0):ce>=0&&o.top>=R?(A=X,l=R,te=R):te=l+ce,o.left=ee,o.top=te},P=F=>{F.stopPropagation(),Z("mousemove",O),Z("mouseup",P)};U("mousemove",O),U("mouseup",P)},h=()=>{if(!e.value||!t.value||!s.value)return;const v=K(),y=s.value.getContext("2d");if(!y)return;const{width:E,height:A}=s.value;y.clearRect(0,0,E,A);const{width:C,height:l}=s.value.getBoundingClientRect(),{width:p,height:_}=e.value.getBoundingClientRect(),{width:G,height:W}=v.config,$=C/M(p),R=l/M(_),O=$*2,P=R*2,F=G*O,w=W*P,X=60*O,I=60*P;y.strokeStyle="#1890ff",y.lineWidth=2,y.strokeRect(X,I,F,w)},u=ve(r,100),f=ve(h,100),m=()=>{if(!e.value||!t.value||!s.value)return;const{width:v,height:y}=e.value.getBoundingClientRect(),{width:E,height:A}=s.value.getBoundingClientRect(),{scrollLeft:C,scrollTop:l}=t.value;o.left=C/v*E,o.top=l/y*A};return q(()=>{window.addEventListener("resize",u),window.addEventListener("resize",f),de(()=>{r(),h()})}),Fe(()=>{window.removeEventListener("resize",u),window.removeEventListener("resize",f)}),he(()=>{if(!t.value||!s.value||!e.value)return;const{width:v,height:y}=e.value.getBoundingClientRect(),{width:E,height:A}=s.value.getBoundingClientRect(),C=o.left*v/E,l=o.top*y/A;t.value.scroll(C,l)}),st(c,()=>{setTimeout(()=>{r(),h()},300)}),he(()=>{i.config.scale&&(u(),f())}),{viewportSize:o,resizeViewport:r,thumbnailRef:s,handleThumbnailMousedown:d,syncScroll:m,showThumbnail:a,switchThumbnail:()=>{a.value=!a.value}}},tn=e=>{const t=K(),n=j({width:0,height:0}),s=ue(0),o=c=>c+"%",a=()=>{if(!e.value)return;const{width:c,height:r}=e.value.getBoundingClientRect(),{width:d,height:h}=t.config,u=M(d+400,!0),f=M(h+400,!0),m=c-4,D=r-4;n.width=u<=m?m:u,n.height=f<=D?D:f,s.value++},i=ve(a,100);return q(()=>{he(()=>{t.config.scale&&a()})}),{sliderFormatter:o,handleSliderChange:i,screenShotSize:n,rulerKey:s}},nn=()=>{const e=j([{direction:k.X,marklineDct:k.Y,marklines:[]},{direction:k.Y,marklineDct:k.X,marklines:[]}]);return{rulerData:e,getStyle:(a,i)=>{const c=a===k.Y?" rotate(90deg)":"",r=a===k.Y?"top":"left";return`transform:${c} translateX(${i[r]}px)`},getUnit:a=>a===k.X?"width":"height",addMarkline:(a,i)=>{const{clientX:c,clientY:r}=a,d=a.target,{left:h,top:u}=d.getBoundingClientRect(),[f,m]=i===k.X?[r-u,1]:[c-h,0];e[m].marklines.push(f)},cancelMarkline:(a,i)=>{const c=i===k.X?0:1;e[c].marklines.splice(a,1)}}},sn=()=>{const e=K(),t=Ce(),n=B(),s={Backspace:()=>n.del(),a:a=>a&&n.selectAll(),s:a=>a&&e.savePage(),c:a=>a&&n.copy(),ArrowLeft:a=>{a?t.switchPanelShow("layer"):n.selected.forEach(i=>{n.data[i].style.left-=e.config.gap})},ArrowUp:a=>{a?t.switchPanelShow("component"):n.selected.forEach(i=>{n.data[i].style.top-=e.config.gap})},ArrowRight:a=>{a?t.switchPanelShow("config"):n.selected.forEach(i=>{n.data[i].style.left+=e.config.gap})},ArrowDown:()=>{n.selected.forEach(a=>{n.data[a].style.top+=e.config.gap})}},o=a=>{var c;if(!((c=document.querySelector(".canvas-wrapper"))==null?void 0:c.contains(document.activeElement)))return;const i=s[a.key];if(i){a.preventDefault(),a.stopPropagation();const r=a.ctrlKey||a.metaKey;i(r)}};q(()=>U("keydown",o)),Fe(()=>Z("keydown",o))},_t=Y("gallery",{state(){return{group:[],list:[]}},actions:{setGroup(e){this.group=e},setList(e){this.list=e},getGallery(e){const t=this.list.find(n=>n.type===e);if(t)return T(t)}}}),B=Y("board",{state:()=>({selected:[],data:[],refs:[],offset:{left:0,top:0}}),getters:{curCom(e){return e.selected.length>0?e.data[e.selected[0]]:void 0},curComs(e){return e.selected.map(t=>e.data[t])}},actions:{rawAppend(e){const t=[],n=[];Array.isArray(e)?e.forEach((s,o)=>{t.push(s),n.push(this.data.length+o)}):(t.push(e),n.push(this.data.length)),this.data.push(...t),this.selected=n},append({top:e=0,left:t=0,type:n=""}){const o=_t().getGallery(n);if(!o)throw new Error("\u83B7\u53D6\u4E0D\u5230\u8BE5\u7EC4\u4EF6\u4FE1\u606F");const{style:a,data:i,propsData:c}=T(o),r=0,d=1,h=n,u=Se(),f=b(b({top:e,left:t,rotate:r,opacity:d},we.defaultComponentSize),a),m=o.name;this.rawAppend({id:u,component:h,label:m,propsData:c,style:f,data:i})},del(){this.selected.length>0&&(Ke(this.data,this.selected),this.selected=[],x.success("\u5220\u9664\u6210\u529F\uFF01"))},cancelSelected(){this.selected=[]},setIndex(e){const t=typeof e=="number"?[e]:e,n=[],{data:s}=this;t.forEach(o=>{!s[o].locked&&s[o].style.display!=="none"&&n.push(o)}),this.selected=n},spliceSelected(e){this.selected.splice(this.selected.indexOf(e),1)},appendSelected(e){const{data:t}=this,n=typeof e=="number"?[e]:e,s=[];n.forEach(o=>{!t[o].locked&&t[o].style.display!=="none"&&s.push(o)}),this.selected.push(...s)},changeSelected(e){this.selected.includes(e)?this.spliceSelected(e):this.appendSelected(e)},setBoard(e){e?Object.assign(this,e):(this.data=[],this.selected=[]),de(()=>{const{handleAllEchartsResize:t}=vt();t(this)})},copy(){if(this.selected.length>0){const e=this.selected.map(t=>{const n=T(this.data[t]);return n.style.left+=10,n.style.top+=10,n});this.rawAppend(e)}},moveUp(e=!1){const{data:t,selected:n}=this,s=t.length;if(n.length!==0)if(n.length>1)x.error("\u591A\u9009\u65E0\u6CD5\u79FB\u52A8");else if(n[0]===s-1)x.error("\u5DF2\u7ECF\u662F\u6700\u9876\u5C42\uFF01");else{const o=e?s-1:n[0]+1;[t[n[0]],t[o]]=[t[o],t[n[0]]]}},moveDown(e=!1){const{data:t,selected:n}=this;if(n.length!==0)if(n.length>1)x.error("\u591A\u9009\u65E0\u6CD5\u79FB\u52A8");else if(n[0]===0)x.error("\u5DF2\u7ECF\u662F\u6700\u5E95\u5C42\uFF01");else{const s=e?0:n[0]-1;[t[n[0]],t[s]]=[t[s],t[n[0]]]}},calcSelectedByRect(e){this.cancelSelected();const t=[];this.data.forEach((n,s)=>{const{width:o,height:a,left:i,top:c}=n.style,r=Math.min(i,e.left),d=Math.min(c,e.top),h=Math.max(i+o,e.left+e.width),u=Math.max(c+a,e.top+e.height),f=h-r,m=u-d;f<o+e.width&&m<a+e.height&&t.push(s)}),this.setIndex(t)},group(){const{selected:e,data:t}=this,n=Ke(t,e),s=n.reduce((u,f)=>{const{left:m,top:D,width:v,height:y}=f.style;return{leftX:Math.min(u.leftX,m),leftY:Math.min(u.leftY,D),rightX:Math.max(u.rightX,v+m),rightY:Math.max(u.rightY,y+D)}},{leftX:1/0,leftY:1/0,rightX:0,rightY:0}),{leftX:o,leftY:a,rightX:i,rightY:c}=s;n.forEach(u=>{u.style.top-=a,u.style.left-=o});const r=i-o,d=c-a,h={id:Se(),component:"group",label:"\u6210\u7EC4",group:n,style:{top:a,left:o,width:r,height:d,rotate:0,opacity:1}};e.length=0,this.rawAppend(h)},cancelGroup(){const{selected:e,data:t}=this,n=t[e[0]];t.splice(e[0],1);const s=n.group;if(!s)return;const{left:o,top:a}=n.style,i=[];s.forEach(c=>{c.style.left+=o,c.style.top+=a,i.push(c)}),this.rawAppend(i)},toggleLocked(e){const{data:t,selected:n}=this;(typeof e=="number"?[e]:[...e]).forEach(o=>{const a=t[o],i=n.indexOf(o);a.locked=!a.locked,a.locked&&i>-1&&n.splice(i,1)})},hide(e){const{data:t,selected:n}=this;(typeof e=="number"?[e]:[...e]).forEach(o=>{t[o].style.display="none";const a=n.indexOf(o);a>-1&&n.splice(a,1)})},show(e){this.data[e].style.display="block"},selectAll(){const{data:e}=this;this.selected=e.map((t,n)=>n)},clearRefs(){this.refs.length=0},setOffset(e){this.offset=e},pushRef(e){this.refs.push(e)}}}),wt="\u8FDE\u63A5\u51FA\u9519\u4E86~",be=e=>{const t=typeof e=="string"?e:wt;return Promise.resolve({code:-1e4,msg:t})},bt="/api/v1/",Ct=e=>{const t={400:"\u8BF7\u6C42\u9519\u8BEF(400)",401:"\u672A\u6388\u6743\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55(401)",403:"\u62D2\u7EDD\u8BBF\u95EE(403)",404:"\u8BF7\u6C42\u51FA\u9519(404)",408:"\u8BF7\u6C42\u8D85\u65F6(408)",500:"\u670D\u52A1\u5668\u9519\u8BEF(500)",501:"\u670D\u52A1\u672A\u5B9E\u73B0(501)",502:"\u7F51\u7EDC\u9519\u8BEF(502)",503:"\u670D\u52A1\u4E0D\u53EF\u7528(503)",504:"\u7F51\u7EDC\u8D85\u65F6(504)",505:"HTTP\u7248\u672C\u4E0D\u53D7\u652F\u6301(505)",0:`\u8FDE\u63A5\u51FA\u9519(${e})!`};return`${t[e]||t[0]}\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u8054\u7CFB\u7BA1\u7406\u5458\uFF01`},N=ot.create({baseURL:bt,timeout:1e4,headers:{"Content-Type":"application/json"},transformResponse:[e=>(typeof e=="string"&&e.startsWith("{")&&(e=xe.parse(e)),e)]});N.interceptors.request.use(e=>{const t=le.get(z.AUTHORIZATION);return t&&e.headers&&(e.headers.authorization=t),e},be);N.interceptors.response.use(async e=>{const t=e.status;return t<200||t>=300?be(Ct(t)):e.data},be);const ze=(e,t,n)=>N.get(e,S(b({},n),{params:t})),Et=(e,t,n)=>N.post(e,t,n),At=(e,t,n)=>N.put(e,t,n),Dt=(e,t,n)=>N.delete(e,S(b({},n),{params:t})),J="page",kt=e=>Et(J,e),on=e=>Dt(`${J}/${e}`),Bt=e=>At(J,e),an=e=>ze(`${J}/${e}`),ln=()=>ze(J),K=Y("page",{state(){const e=S(b({_id:"",__v:0},we.defaultPageSize),{title:"",description:"",backgroundColor:"",scale:100,gap:1,url:"",zoom:0,author:"",pageMode:0});return{config:e,cache:S(b({},e),{components:[]})}},actions:{updateCache(){const e=B();Object.assign(this.cache,this.config),this.cache.components=T(oe(e.data))},async savePage(){const e=B(),t=at();if(e.data.length===0){x.error("\u5C1A\u672A\u6DFB\u52A0\u4EFB\u4F55\u7EC4\u4EF6\uFF01");return}const n=T(oe(e.data)),s=b({components:n},this.config),i=s,{_id:o}=i,a=re(i,["_id"]);if(o)(await Bt(oe(s))).code===0&&(x.success("\u4FDD\u5B58\u6210\u529F\uFF01"),this.updateCache());else{const c=await kt(b({},a));c.code===0&&(x.success("\u521B\u5EFA\u6210\u529F\uFF01"),this.config._id=c.data._id,this.updateCache(),t.push(`/editor/${c.data._id}`))}},isModified(){const e=B(),t=S(b({},this.config),{components:oe(e.data)});return JSON.stringify(t)!==JSON.stringify(this.cache)}}}),cn=Y("snapshot",{state:()=>({data:[],index:-1}),actions:{undo(){if(this.index>-1){this.index--;const e=this.index===-1?void 0:T(this.data[this.index]);if(e){const{selected:t,page:n}=e,{components:s}=n;B().setBoard({selected:t,data:s})}}},redo(){if(this.index<this.data.length-1){this.index++;const e=B(),t=T(this.data[this.index]),{selected:n,page:s}=t,{components:o}=s;e.setBoard({selected:n,data:o})}},rawRecordSnapshot(e,t){this.data[++this.index]={page:e,selected:t},this.index<this.data.length-1&&(this.data=this.data.slice(0,this.index+1)),this.data.length>we.maxSnapshot&&this.data.shift(),x.success("\u4FDD\u5B58\u6210\u529F\uFF01")},recordSnapshot(){const e=K(),t=B(),{data:n,selected:s}=t,o=T(n),a=S(b({},e.config),{components:o});this.rawRecordSnapshot(a,s)}}}),rn=Y("theme",{state(){return{value:"light"}},actions:{async changeTheme(e){this.value=e,e==="dark"?(lt||await it(),le.set(z.IS_DARK,1)):le.remove(z.IS_DARK),document.documentElement.setAttribute("data-theme",this.value)},async switchTheme(){const e=le.get(z.IS_DARK);this.changeTheme(e?"light":"dark")}}}),Ce=Y("panel",{state(){return{layer:!0,component:!0,config:!0,util:!0}},actions:{switchPanelShow(e){this[e]=!this[e]}}});var Q;(function(e){e.BOARD="board",e.LAYER="layer"})(Q||(Q={}));const Ne=Y("menu",{state(){return{board:{show:!1,style:{}},layer:{show:!1,style:{}}}},actions:{show(e,t,n){e.preventDefault();const{pageX:s,pageY:o}=e;n.selected.length!==0&&(this[t].show=!0,de(()=>{const{ref:a,container:i,style:c}=this[t];if(!a||!i)return;const r=10,{width:d,height:h}=a.getBoundingClientRect(),{width:u,height:f,left:m,top:D}=i.getBoundingClientRect();c.left=Math.min(s-m,u-d-r),c.top=Math.min(o-D,f-h-r)}))},hide(e){this[e].show=!1},hideAll(){Object.values(Q).forEach(e=>{this.hide(e)})},setRefAndContainer(e,t,n){this[e].ref=t,this[e].container=n}}});function M(e,t=!1){const s=K().config.scale/100,o=t?e*s:e/s;return Math.floor(o)}const Ft=(e,t,n=".board")=>{const s=document.querySelector(n);if(!s)return;const o=s.getBoundingClientRect();return{top:M(t-o.top),left:M(e-o.left)}},le={set(e,t,n=864e5){const s=typeof t=="string"?t:xe.stringify(t);return localStorage.setItem(e,s),localStorage.setItem(`${e}__expires__`,Date.now()+n+""),t},get(e){const t=Date.now(),n=localStorage.getItem(`${e}__expires__`)||t+1;if(t>=n){this.remove(e);return}return localStorage.getItem(e)},remove(e){localStorage.removeItem(e),localStorage.removeItem(`${e}__expires__`)}},un=e=>e.map(t=>{const n="center";return S(b({},t),{dataIndex:t.dataIndex||t.key,align:n})}),Ke=(e,t)=>{const n=t.map(s=>e[s]);return n.forEach(s=>{const o=e.indexOf(s);e.splice(o,1)}),n},We=e=>{const{selected:t,data:n}=e;if(t.length<=1)return!0;let s=0;return t.forEach(o=>{if(!n[o])return;const{group:a}=n[o];(!a||a.length===0)&&s++}),s!==t.length},qe=e=>{const{selected:t,data:n}=e;if(t.length!==1)return!0;const{group:s}=n[t[0]];return!(s==null?void 0:s.length)},St=async(e,t)=>new Promise(n=>{const{name:s,animationDelay:o,animationDuration:a,animationIterationCount:i}=t,c="animate__animated",r=`animate__${s}`;e.style.animationDelay=`${o}s`,e.style.animationDuration=`${a}s`,e.style.animationIterationCount=`${i}`,e.classList.add(c,r);const d=()=>{e.removeEventListener("animationend",d),e.removeEventListener("animationcancel",d),e.style.animationDelay="",e.style.animationDuration="",e.style.animationIterationCount="",e.classList.remove(c,r),n()};e.addEventListener("animationend",d),e.addEventListener("animationcancel",d)}),xt=async(e,t)=>{if(!!t)for(let n=0;n<t.length;n++)await St(e,t[n])},Rt="modulepreload",Ve={},Ot="/",Ze=function(t,n){return!n||n.length===0?t():Promise.all(n.map(s=>{if(s=`${Ot}${s}`,s in Ve)return;Ve[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${a}`))return;const i=document.createElement("link");if(i.rel=o?"stylesheet":Rt,o||(i.as="script",i.crossOrigin=""),i.href=s,document.head.appendChild(i),o)return new Promise((c,r)=>{i.addEventListener("load",c),i.addEventListener("error",r)})})).then(()=>t())};var Je=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n};const Pt={cn:{top:"\u7F6E\u9876",bottom:"\u7F6E\u5E95",up:"\u4E0A\u79FB",down:"\u4E0B\u79FB",group:"\u6210\u7EC4",cancelGroup:"\u53D6\u6D88\u6210\u7EC4",lock:"\u9501\u5B9A",hide:"\u9690\u85CF",layer:"\u56FE\u5C42",tip:"\u5C1A\u672A\u6DFB\u52A0\u4EFB\u4F55\u7EC4\u4EF6"},en:{top:"Top",bottom:"Bottom",up:"Up",down:"Down",group:"Group",cancelGroup:"Cancel Group",lock:"Lock",hide:"Hide",layer:"Layer",tip:"There is No Component"}},It={cn:{top:"\u7F6E\u9876",bottom:"\u7F6E\u5E95",up:"\u4E0A\u79FB\u4E00\u5C42",down:"\u4E0B\u79FB\u4E00\u5C42",group:"\u6210\u7EC4",cancelGroup:"\u53D6\u6D88\u6210\u7EC4",lock:"\u9501\u5B9A",hide:"\u9690\u85CF",copy:"\u590D\u5236",delete:"\u5220\u9664"},en:{top:"Top",bottom:"Bottom",up:"Up",down:"Down",group:"Group",cancelGroup:"Cancel Group",lock:"Lock",hide:"Hide",copy:"Copy",delete:"Delete"}};const Lt=ae({name:"board-box",props:{data:{type:Object,default:()=>({})},patchAll:{type:Boolean,default:!1},editorMode:{type:Boolean,default:!1}},setup(e){const t=se(),n=pe(()=>e.data);return q(()=>{var o;const{animations:s}=n.value;e.editorMode||!s||!((o=t.value)==null?void 0:o.$el)||xt(t.value.$el,n.value.animations)}),{splitStyleAndPatch:yt,patchUnit:_e,box:t}}});function Tt(e,t,n,s,o,a){return L(),fe(Oe(`cq-${e.data.component}`),{ref:"box",group:e.data.group,data:e.data.data,"props-data":e.data.propsData,style:Re(e.patchAll?e.patchUnit(e.data.style):e.splitStyleAndPatch(e.data.style,!1))},null,8,["group","data","props-data","style"])}var Mt=Je(Lt,[["render",Tt]]);const $t=["onClick"],Xt=ae({props:{menuType:{type:String,default:()=>"board"},container:Object},setup(e){const t=e,n=B(),s=Ne(),{t:o}=Pe({useScope:"local",messages:It}),a=se(),i=j([{name:o("top"),icon:Ie,event:()=>n.moveUp(!0)},{name:o("bottom"),icon:Le,event:()=>n.moveDown(!0)},{name:o("up"),icon:Te,event:()=>n.moveUp()},{name:o("down"),icon:Me,event:()=>n.moveDown()},{name:o("group"),icon:$e,disable:!1,event:()=>n.group()},{name:o("cancelGroup"),icon:Xe,disable:!1,event:()=>n.cancelGroup()},{name:o("lock"),icon:ge,disable:!1,event:()=>n.toggleLocked(n.selected)},{name:o("hide"),icon:me,disable:!1,event:()=>n.hide(n.selected)},{name:o("copy"),icon:ct,event:()=>n.copy()},{name:o("delete"),icon:rt,event:()=>n.del()}]),c=(d,h,u)=>{if(d.stopPropagation(),h){d.preventDefault();return}s.hide(t.menuType),u()},r=()=>{U("click",d=>{d.stopPropagation(),d.preventDefault(),s.hideAll()})};return q(()=>{i[4].disable=We(n),i[5].disable=qe(n),s.setRefAndContainer(t.menuType,a.value,t.container),r()}),(d,h)=>(L(),V("div",{ref_key:"menuRef",ref:a,class:"board-menu",style:Re(ie(_e)(ie(s)[e.menuType].style)),onMousedown:h[0]||(h[0]=je(()=>{},["stop"])),onMouseup:h[1]||(h[1]=je(()=>{},["stop"]))},[Ye("ul",null,[(L(!0),V(ye,null,Ge(ie(i),u=>(L(),V("li",{key:u.name,class:ut({"--disable":u.disable}),onClick:f=>c(f,u.disable,u.event)},[(L(),fe(Oe(u.icon))),Ye("span",null,dt(u.name),1)],10,$t))),128))])],36))}});var Yt="/assets/logo.8407279e.svg";var dn=ae({name:"layer-panel",setup(){const e=B(),t=Ce(),n=Ne(),s=ue(!1),o=se(),{t:a}=Pe({useScope:"local",messages:Pt}),i=[{tip:a("top"),icon:Ie,event:()=>e.moveUp(!0)},{tip:a("bottom"),icon:Le,event:()=>e.moveDown(!0)},{tip:a("up"),icon:Te,event:()=>e.moveUp()},{tip:a("down"),icon:Me,event:()=>e.moveDown()}],c=[{tip:a("group"),icon:$e,event:()=>e.group()},{tip:a("cancelGroup"),icon:Xe,event:()=>e.cancelGroup()},{tip:a("lock"),icon:ge,event:()=>e.toggleLocked(e.selected)},{tip:a("hide"),icon:me,event:()=>e.hide(e.selected)}],r=j({});e.data.forEach(l=>{var p;((p=l==null?void 0:l.group)==null?void 0:p.length)&&(r[l.id]=!1)});const d=pe(()=>{const l=[];return l[0]={disable:We(e)},l[1]={disable:qe(e)},l[2]={disable:e.selected.length===0},l[3]={disable:e.selected.length===0},l}),h=pe(()=>s.value?"--item":"--thumbail");function u(l,p){l.stopPropagation(),e.toggleLocked(p)}function f(l,p){l.stopPropagation(),e.show(p)}function m(l,p){l.ctrlKey||l.metaKey?e.changeSelected(p):e.setIndex(p)}function D(l){(l===0&&s.value||l===1&&!s.value)&&(s.value=!s.value)}function v(l){r[l]=!r[l]}function y(l,p){l.preventDefault(),e.selected.includes(p)||e.setIndex(p),n.show(l,Q.LAYER,e)}function E(){return i.map(l=>g(Be,{key:l.icon.name,placement:"bottom",title:l.tip},{default:()=>[g(l.icon,{onClick:l.event,class:H({"--disable":e.selected.length===0})},null)]}))}function A(){return e.data.map((l,p)=>{const{group:_,id:G,locked:W}=l,{display:$}=l.style,R=s.value?g(He,null,null):g("img",{src:Yt},null);let O,P=R,F;if(W&&(F=g(ge,{class:"--icon",onClick:w=>u(w,p)},null)),$==="none"&&(F=g(me,{class:"--icon",onClick:w=>f(w,p)},null)),_==null?void 0:_.length){const[w,X]=r[G]?["rotate(90deg)","block"]:["rotate(0deg)","none"];P=g(ft,{class:"--animated",style:{transform:w},onClick:v.bind(null,G)},null),O=_.map(I=>g("li",{key:I.id,class:H("--animated",h.value),style:{display:X}},[R,g("b",null,[I.label])]))}return g(ye,null,[g("li",{key:l.id,class:H(h.value,{"--active":e.selected.includes(p)}),onContextmenu:w=>y(w,p),onMouseup:w=>m(w,p)},[F,P,g("b",null,[l.label])]),O])})}function C(){return c.map((l,p)=>{const _=d.value[p];return g(Be,{key:l.icon.name,placement:"bottom",title:l.tip},{default:()=>[g(l.icon,{key:l.icon.name,onClick:(_==null?void 0:_.disable)?void 0:l.event,class:H({"--disable":_==null?void 0:_.disable})},null)]})})}return()=>g("div",{class:H("layer-panel",{"--hide":!t.layer}),ref:o},[g("header",{class:"layer-panel__header"},[g("div",null,[a("layer")]),g("section",null,[[ht,He].map((l,p)=>g(l,{key:l.name,class:H({"--active":p===0?!s.value:s.value}),onClick:D.bind(null,p)},null)),g(pt,{onClick:()=>t.switchPanelShow("layer")},null)])]),g("section",{class:"layer-panel__wrapper"},[g("header",{class:"layer-panel__toolbar"},[E()]),e.data.length===0?g(nt,{description:a("tip")},null):g("ul",{class:"layer-panel__box"},[A()]),n.layer.show&&g(Xt,{"menu-type":Q.LAYER,container:o.value},null)]),g("footer",{class:"layer-panel__footer"},[C()])])}});const Gt={class:"board-group"},jt=ae({props:{group:{type:Array,default:()=>[]}},setup(e){return(t,n)=>(L(),V("div",Gt,[(L(!0),V(ye,null,Ge(e.group,s=>(L(),fe(ie(Mt),{key:s.id,data:s,"patch-all":""},null,8,["data"]))),128))]))}});var Ht=Je(jt,[["__scopeId","data-v-644c95db"]]);const Ut={"./basic/index.ts":()=>Ze(()=>import("./index.b11f6504.js"),["assets/index.b11f6504.js","assets/vendor.04153819.js","assets/vendor.266bc503.css","assets/ant-design-vue.2145dcdb.js","assets/ant-design-vue.b912909b.css","assets/lodash.f14311af.js","assets/node-forge.38760642.js","assets/echarts.dcc6399b.js","assets/prettier.97963628.js"]),"./chart/index.ts":()=>Ze(()=>import("./index.eae0fce5.js"),["assets/index.eae0fce5.js","assets/vendor.04153819.js","assets/vendor.266bc503.css","assets/ant-design-vue.2145dcdb.js","assets/ant-design-vue.b912909b.css","assets/lodash.f14311af.js","assets/node-forge.38760642.js","assets/echarts.dcc6399b.js","assets/prettier.97963628.js"])},Ee={};for(const[e,t]of Object.entries(Ut)){const n=e.match(/\.\/(.*)\/index\.ts/);(n==null?void 0:n[1])&&(Ee[n[1]]=t)}var hn=async e=>{const t=[],n=[];async function s(o){const i=(await o()).default,{name:c,icon:r,components:d,order:h,dataConfig:u}=i,f=[];for(const[m,D]of Object.entries(d)){const y=(await D()).default;y.type=m,y.dataConfig=u||y.dataConfig,e.component(`cq-${m}`,y.component),f.push(y),t.push(y)}n[h]={groupName:c,icon:r,list:f}}e.component("cq-group",Ht);for(const o in Ee)await s(Ee[o]);return{list:t,group:n}};export{xt as A,Mt as B,cn as C,Jt as D,an as E,Ue as F,Yt as G,dn as H,Et as I,z as L,Q as M,Je as _,Ze as a,hn as b,_t as c,un as d,on as e,ze as f,ln as g,B as h,K as i,Ne as j,Z as k,le as l,vt as m,Qt as n,U as o,_e as p,tn as q,en as r,yt as s,nn as t,rn as u,sn as v,M as w,Xt as x,Ce as y,St as z};
