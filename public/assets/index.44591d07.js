import{I as H,l as x,L as A,u as G,_ as W,G as X}from"./array.ba4c8e62.js";import{e as B}from"./string.b9a7e01b.js";import{t as L}from"./promise.aa1a7cc9.js";import{e3 as U,e4 as Y,d as O,d7 as J,dt as Q,e5 as ee,cV as se,t as h,r as D,cX as i,c_ as V,dj as m,l as a,cZ as o,D as _,dn as w,u as e,cY as v,dB as ae,e2 as oe,dA as C,F as M,cW as te,dk as re,d9 as ne,e6 as le,e7 as ue,dx as de,dy as ie}from"./vendor.1aa60481.js";import{F as N,B as ce,u as R,v as g,A as pe,w as me,b as $,I,M as ve,m as j,L as fe,x as we,y as ye,z as _e}from"./ant-design-vue.2c5e11f6.js";import"./main.8256c790.js";import"./lodash.52f79bb2.js";import"./node-forge.5968f396.js";import"./echarts.3ce280c0.js";import"./prettier.bc782120.js";const ge="user",ke=c=>H(`${ge}/changePassword`,c),Pe=[{key:"page",icon:U,name:"\u9875\u9762\u7BA1\u7406"},{key:"masterplate",icon:Y,name:"\u6A21\u677F\u7BA1\u7406"}];const be={class:"header-right"},Fe={class:"exit-dropdown"},he={class:"header-right_span"},Ce=_(" \u8FD4\u56DE\u7BA1\u7406\u9875 "),$e=O({setup(c){const f=x.get(A.USER_INFO),d=f?J.parse(f):{},k=Q(),u=ee(),P=G(),{locale:r,t:n}=se({useScope:"global"}),y=h(!1);function E(){r.value=r.value==="en"?"cn":"en"}const l=D({password:"",newPassword:"",confirmPassword:""}),b=async(p,s)=>s?/^[a-zA-Z]\w{5,17}$/.test(s)?Promise.resolve():Promise.reject(n("validator.length")):Promise.reject(n("validator.empty")),K=D({password:[{required:!0,validator:b,trigger:"blur"}],newPassword:[{required:!0,validator:b,trigger:"blur"}],confirmPassword:[{required:!0,validator:async(p,s)=>{const[t]=await L(b(p,s));return t?Promise.reject(t):s!==l.newPassword?Promise.reject(n("validator.consistent")):Promise.resolve()},trigger:"blur"}]}),{resetFields:T,validate:q,validateInfos:F}=N.useForm(l,K),Z=async()=>{const[p]=await L(q());if(p)return;const s=B(l.password),t=B(l.newPassword),S=await ke({password:s,newPassword:t});S.code===0?(y.value=!1,j.success("\u4FEE\u6539\u6210\u529F\uFF01")):j.error(S.msg)},z=()=>{x.remove(A.AUTHORIZATION),k.push(`/login?redirect=${u.path}`),j.success("\u5DF2\u9000\u51FA\u767B\u5F55\uFF01")};return(p,s)=>(i(),V(M,null,[m("div",be,[a(e(ce),{onClick:s[0]||(s[0]=t=>E())},{default:o(()=>[_(w(e(n)("lang")),1)]),_:1}),a(e(me),null,{overlay:o(()=>[a(e(R),null,{default:o(()=>[a(e(g),{key:"0",onClick:s[1]||(s[1]=t=>y.value=!0)},{default:o(()=>[_(w(e(n)("password.modify")),1)]),_:1}),p.$route.path.includes("editor")?(i(),v(e(g),{key:"1",onClick:s[2]||(s[2]=t=>p.$router.push("/"))},{default:o(()=>[Ce]),_:1})):ae("",!0),a(e(g),{key:"2",onClick:z},{default:o(()=>[_(w(e(n)("exit")),1)]),_:1})]),_:1})]),default:o(()=>[m("div",Fe,[a(e(pe),null,{icon:o(()=>[a(e(U))]),_:1}),m("span",he,w(e(d).name),1)])]),_:1}),a(e(oe),{class:"theme-change",onClick:s[3]||(s[3]=t=>e(P).switchTheme())})]),a(e(ve),{visible:y.value,"onUpdate:visible":s[7]||(s[7]=t=>y.value=t),title:e(n)("password.modify"),"after-close":e(T),onOk:Z},{default:o(()=>[a(e(N),{model:e(l),"label-col":{span:4},"wrapper-col":{span:16}},{default:o(()=>[a(e($),C({label:e(n)("password.old")},e(F).password),{default:o(()=>[a(e(I),{value:e(l).password,"onUpdate:value":s[4]||(s[4]=t=>e(l).password=t),type:"password"},null,8,["value"])]),_:1},16,["label"]),a(e($),C({label:e(n)("password.new")},e(F).newPassword),{default:o(()=>[a(e(I),{value:e(l).newPassword,"onUpdate:value":s[5]||(s[5]=t=>e(l).newPassword=t),type:"password"},null,8,["value"])]),_:1},16,["label"]),a(e($),C({label:e(n)("password.confirm")},e(F).confirmPassword),{default:o(()=>[a(e(I),{value:e(l).confirmPassword,"onUpdate:value":s[6]||(s[6]=t=>e(l).confirmPassword=t),type:"password"},null,8,["value"])]),_:1},16,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title","after-close"])],64))}});const Ie=c=>(de("data-v-027eec89"),c=c(),ie(),c),je=Ie(()=>m("div",{class:"logo"},[m("img",{width:"40",height:"40",src:X})],-1)),Se={class:"main"},xe=O({setup(c){const f=h(["page"]),d=h(!1);return(k,u)=>{const P=te("RouterView");return i(),v(e(fe),{class:"container"},{default:o(()=>[a(e(we),{collapsed:d.value,"onUpdate:collapsed":u[1]||(u[1]=r=>d.value=r),trigger:null,collapsible:""},{default:o(()=>[je,a(e(R),{selectedKeys:f.value,"onUpdate:selectedKeys":u[0]||(u[0]=r=>f.value=r),theme:"dark",mode:"inline"},{default:o(()=>[(i(!0),V(M,null,re(e(Pe),r=>(i(),v(e(g),{key:r.key,onClick:n=>k.$router.push({name:r.key})},{default:o(()=>[(i(),v(ne(r.icon))),m("span",null,w(r.name),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["selectedKeys"])]),_:1},8,["collapsed"]),m("div",Se,[a(e(ye),{class:"layout-header"},{default:o(()=>[d.value?(i(),v(e(le),{key:0,class:"trigger",onClick:u[2]||(u[2]=r=>d.value=!d.value)})):(i(),v(e(ue),{key:1,class:"trigger",onClick:u[3]||(u[3]=r=>d.value=!d.value)})),a($e)]),_:1}),a(e(_e),{class:"layout-content"},{default:o(()=>[a(P)]),_:1})])]),_:1})}}});var Ke=W(xe,[["__scopeId","data-v-027eec89"]]);export{Ke as default};
